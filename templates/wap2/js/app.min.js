!function(e,t){var o=angular.module("starter.config",[]);o.config(["$httpProvider",function(e){e.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",e.defaults.headers.put["Content-Type"]="application/x-www-form-urlencoded",e.defaults.transformRequest=[function(e){var t=function(e){var o,r,a,n,s,i,d,u="";for(o in e)if(r=e[o],r instanceof Array)for(d=0;d<r.length;++d)s=r[d],a=o+"["+d+"]",i={},i[a]=s,u+=t(i)+"&";else if(r instanceof Object)for(n in r)s=r[n],null!=s&&(a=o+"."+n,i={},i[a]=s,u+=t(i)+"&");else void 0!==r&&(u+=encodeURIComponent(o)+"="+encodeURIComponent(r)+"&");return u.length?u.substr(0,u.length-1):u};return angular.isObject(e)&&"[object File]"!==String(e)?t(e):e}],e.defaults.useXDomain=!0}]),o.constant("ENV",{debug:!1,api:"http://demo3.xuewl.cn/index.php?m=api&c=app",siteUrl:"http://demo3.xuewl.cn",imgUrl:"http://demo3.xuewl.cn",version:"0.0.2"}),angular.module("starter.controllers",[]).controller("HomeCtrl",["$rootScope","$state","$scope","$ionicSlideBoxDelegate","$timeout","ENV","trial_listFactory","StorageFactory",function(e,t,o,r,a,n,s,i){o.showloading=!0,o.showscroll=!0,o.tj_showloading=!0,o.$on("$ionicView.beforeEnter",function(){i.get("qidong")?(o.quyu=1,e.hideTabs=""):(o.quyu=2,i.set("qidong",1))}),e.hideTabs="tabs-item-hide",s.set_goods_isrecommend("trial"),o.doRefresh=function(){o.$broadcast("scroll.refreshComplete")},o.qidongyu=function(){o.quyu=1,e.hideTabs=""},o.go_changed=function(t){if(console.log(t),2==t){a(function(){o.quyu=1,e.hideTabs=""},3e3)}},o.index_loadMore=function(){s.getMoreTopics()},o.jifen=function(){t.go("tab.jifenduihuan")},o.dianji=function(){t.go("tab.task")},s.getTopTopics(),o.$on("trial_listFactory.set_goods_isrecommend",function(){o.tj_goods=s.get_goods_isrecommend(),o.tj_showloading=!1,o.tj_goods2=o.tj_goods.slice(3,6),o.tj_goods3=o.tj_goods.slice(6,9)}),o.$on("PortalList.portalsUpdated",function(){o.goods=s.getArticles(),o.showloading=!1,o.$broadcast("scroll.infiniteScrollComplete"),o.index_hasNextPage=s.hasNextPage()})}]).controller("ArticleCtrl",["$scope","goodslists","ENV",function(e,t,o){e.name="ArticleCtrl",e.ENV=o,t.getTopTopics()}]).controller("categorylists",["$scope",function(e){}]).controller("rebate_list",["$rootScope","$scope","ENV","$timeout","$ionicPopover","categorylistsFactory","rebate_listFactory","$stateParams","$ionicSideMenuDelegate",function(e,t,o,r,a,n,s,i,d){t.ENV=o,t.$on("$ionicView.beforeEnter",function(){e.hideTabs=""}),t.showloading=!0,t.rebate_hasNextPage=!1,t.toggleLeft=function(){d.toggleLeft()},t.hide=function(){$ionicLoading.hide()},s.getTopTopics(),t.$on("PortalList.portalsUpdated",function(){t.goods=s.getArticles(),t.showloading=!1,t.rebate_hasNextPage=s.hasNextPage(),t.$broadcast("scroll.infiniteScrollComplete")}),t.good1=function(e){s.goods_catid_list(e),t.showloading=!0},t.doRefresh=function(){s.getTopTopics(),t.$broadcast("scroll.refreshComplete")},t.loadMore=function(){s.getMoreTopics()},t.changeTab=function(e,o){for(var r=document.getElementById("sub_header_list").getElementsByTagName("a"),a=0;4>a;a++)r[a].className="button button-clear ";r[o].className="button button-clear sub_button_select",t.showloading=!0,s.goods_catid_list_order(e)},n.category_list(),t.$on("categorylistsFactory.category_list",function(){t.categorylists=n.get_listdata()})}]).controller("trial_list",["$rootScope","$scope","ENV","$timeout","$ionicPopover","$ionicLoading","trial_listFactory","$stateParams","$ionicSideMenuDelegate","categorylistsFactory",function(e,t,o,r,a,n,s,i,d,u){e.ENV=o,t.showloading=!0,t.trial_list_hasNextPage=!1,t.$on("$ionicView.beforeEnter",function(){e.hideTabs=""}),t.toggleLeft=function(){d.toggleLeft()},t.hide=function(){n.hide()},s.getTopTopics(),t.$on("PortalList.portalsUpdated",function(){t.goods=s.getArticles(),t.showloading=!1,t.$broadcast("scroll.infiniteScrollComplete"),t.trial_list_hasNextPage=s.hasNextPage()}),t.good1=function(e){t.showloading=!0,s.goods_catid_list(e)},t.doRefresh=function(){s.getTopTopics(),t.$broadcast("scroll.refreshComplete")},t.loadMore=function(){s.getMoreTopics()},t.hasNextPage=function(){return s.hasNextPage()},t.changeTab=function(e,o){for(var r=document.getElementById("sub_header_list").getElementsByTagName("a"),a=0;a<r.length;a++)r[a].className="button button-clear ";r[o].className="button button-clear sub_button_select",t.showloading=!0,s.goods_catid_list_order(e)},u.category_list(),t.$on("categorylistsFactory.category_list",function(){t.categorylists=u.get_listdata()})}]).controller("trial_list-red",["$rootScope","$scope","ENV","$timeout","$ionicPopover","$ionicLoading","trial_listFactory","$stateParams","$ionicSideMenuDelegate","categorylistsFactory",function(e,t,o,r,a,n,s,i,d,u){e.ENV=o,t.showloading=!0,t.trial_list_hasNextPage=!1,t.$on("$ionicView.beforeEnter",function(){e.hideTabs=""}),s.getTopTopics_red(),t.$on("PortalList.portalsUpdated",function(){t.goods=s.getArticles(),t.showloading=!1,t.$broadcast("scroll.infiniteScrollComplete"),t.trial_list_hasNextPage=s.hasNextPage()}),t.doRefresh=function(){s.getTopTopics_red(),t.$broadcast("scroll.refreshComplete")},t.loadMore=function(){s.getMoreTopics_red()},t.hasNextPage=function(){return s.hasNextPage()},t.changeTab=function(e,o){for(var r=document.getElementById("sub_header_list").getElementsByTagName("a"),a=0;a<r.length;a++)r[a].className="button button-clear ";r[o].className="button button-clear sub_button_select",t.showloading=!0,s.goods_catid_list_order(e)}}]).controller("articlehelplist",["$scope","articlehelplistFactory",function(e,t){t.all(2),e.$on("articlehelplistFactory.all",function(){e.articlehelplist=t.get_lists()})}]).controller("article_catid_helplist",["$scope","articlehelplistFactory","$stateParams",function(e,t,o){e.title="帮助中心2",e.articlehelplist=t.catid_helplist(o.catid)}]).controller("article_catid_show_list",["$scope","articlehelplistFactory","$stateParams",function(e,t,o){e.title="帮助中心2",e.articlehelplist=t.article_catid_show_list(o.catid)}]).controller("article_show",["$scope","article_showFactory","$stateParams",function(e,t,o){e.title="帮助中心";var r=o.id;t.get(r),e.$on("NewsContent.articleshow",function(){e.articledata=t.getArticle()})}]).controller("article_catid_helplist",["$scope","articlehelplistFactory","$stateParams",function(e,t,o){e.title="帮助中心2",e.articlehelplist=t.catid_helplist(o.catid)}]).controller("Userhome",["$rootScope","$scope","$ionicLoading","$state","StorageFactory","UserPersonalFactory","qiandaoFactory",function(e,t,o,r,a,n,s){t.$on("$ionicView.beforeEnter",function(){e.hideTabs="",!a.get("user")||a.get("user")&&1!=a.get("user").status?(t.userInfo="",t.logo_status=0):(userid=a.get("user").data.userid,random=a.get("user").data.random,t.user=a.get("user"),n.set_userinfo(userid,random),t.logo_status=1)}),t.user_showloading=!1,t.$on("UserPersonal.set_userinfo",function(){t.userInfo=n.get_userinfo(),1==t.userInfo.status&&(a.set("profile",t.userInfo),t.logo_status=1,t.user_showloading=!1)}),t.user_profile=function(){return 1!=t.logo_status?(r.go("tab.user_login"),!1):void r.go("tab.user_profile")},t.user_order_trial=function(){return 1!=t.logo_status?(r.go("tab.user_login"),!1):void r.go("tab.trial_order")},t.user_order_commission=function(){return 1!=t.logo_status?(r.go("tab.user_login"),!1):void r.go("tab.commission_order")},t.user_order_rebate=function(){return 1!=t.logo_status?(r.go("tab.user_login"),!1):void r.go("tab.rebate_order")},t.user_order_task=function(){return 1!=t.logo_status?(r.go("tab.user_login"),!1):void r.go("tab.task_order")},t.user_order_jifen=function(){return 1!=t.logo_status?(r.go("tab.user_login"),!1):void r.go("tab.user_jifen_order")},t.user_deposite=function(){return 1!=t.logo_status?(r.go("tab.user_login"),!1):0==t.userInfo.name_status?(o.show({noBackdrop:!0,template:"您的实名认证正在审核当中,请耐心等待,认证通过即可申请提现！",duration:3e3}),!1):-1==t.userInfo.name_status?(o.show({noBackdrop:!0,template:"您的实名认证审核失败了,请修改后再次提交,认证通过即可申请提现！",duration:3e3}),r.go("tab.user_profile_card"),!1):""==t.userInfo.name_status||null==t.userInfo.name_status?(o.show({noBackdrop:!0,template:"您还未进行实名认证,为了您的账户和资金安全,请先进行实名认证,认证通过即可申请提现！",duration:3e3}),r.go("tab.user_profile_card"),!1):1!=t.userInfo.bank_status&&1!=t.alipay_status?(o.show({noBackdrop:!0,template:"您还未绑定银行卡或支付宝,绑定之后即可申请提现！",duration:3e3}),r.go("tab.user_profile"),!1):void r.go("tab.user_deposite")},t.getmessage=function(){return 1!=t.logo_status?(r.go("tab.user_login"),!1):void r.go("tab.user_log")},t.announce=function(){return 1!=t.logo_status?(r.go("tab.user_login"),!1):void r.go("tab.user_announce")},t.user_nickname=function(){return 1!=t.logo_status?(r.go("tab.user_login"),!1):void r.go("tab.user_profile_nickname")},t.user_qiandao=function(){return 1!=t.logo_status?(r.go("tab.user_login"),!1):void s.set_sign(userid,random)},t.$on("qiandaoFactory.set_sign",function(){t.sign=s.get_sign(),o.show({noBackdrop:!0,template:t.sign.msg,duration:1500})})}]).controller("user_announce",["$rootScope","$scope","$state","user_announceFactory","StorageFactory",function(e,t,o,r,a){return t.$on("$ionicView.beforeEnter",function(){e.hideTabs="tabs-item-hide",userid=a.get("user").data.userid,random=a.get("user").data.random}),!a.get("user")||a.get("user")&&1!=a.get("user").status?(o.go("tab.user_login"),!1):(t.showloading=!0,t.zz_hasNextPage=!1,t.zz_type=1,r.announce_list(userid,random,1),t.doRefresh=function(){r.announce_list(userid,random,t.zz_type),t.$broadcast("scroll.refreshComplete")},t.loadMore=function(){r.getMoreTopics(userid,random,t.zz_type)},t.hasNextPage=function(){return r.hasNextPage()},t.$on("user_announceFactory.announce_list",function(){t.announcedata=r.get_listdata(),t.showloading=!1,t.zz_hasNextPage=r.hasNextPage(),t.$broadcast("scroll.infiniteScrollComplete")}),t.changeTab=function(e,o){t.zz_type=o,r.announce_list(userid,random,t.zz_type),t.showloading=!0},t.changeshow=function(e,t){o.go("tab.user_announce_show",{type:e,id:t})},void $(".bar-subheader .button").bind("click",function(){$(".bar-subheader .button").attr("class","button button-clear"),$(this).attr("class","button button-clear sub_button_select")}))}]).controller("announce_show",["$scope","$rootScope","$stateParams","user_announceFactory",function(e,t,o,r){e.$on("$ionicView.beforeEnter",function(){t.hideTabs="tabs-item-hide"});var a=o.id,n=o.type;e.showloading=!0,r.set_announce_show(n,a),e.$on("user_announceFactory.set_announce_show",function(){e.show_announce=r.get_set_announce_show(),e.showloading=!1})}]).controller("User_login",["$rootScope","$scope","$state","$location","$ionicHistory","$ionicLoading","$timeout","UserloginFactory","StorageFactory","UserPersonalFactory","jpushService",function(e,t,o,r,a,n,s,i,d,u,c){t.$on("$ionicView.beforeEnter",function(){e.hideTabs="tabs-item-hide",url=a.viewHistory().forwardView?a.viewHistory().forwardView.url:"",d.remove("user"),d.remove("profile"),d.remove("taobao")});r.path();t.user={name:"",password:""},t.login=function(){n.show({noBackdrop:!0,template:"正在登录...",duration:1e3}),i.login(t.user.username,t.user.password)},t.qqweibo=function(){window.plugins.Pgbaidulogin.qqweibo(function(e){var t=JSON.parse(e);i.pingtai_login(t)},function(e){alert("encoding failed: "+e)})},t.qq=function(){window.plugins.Pgbaidulogin.qq(function(e){var t=JSON.parse(e);i.pingtai_login(t)},function(e){alert("encoding failed: "+e)})},t.sina=function(){window.plugins.Pgbaidulogin.sina(function(e){var t=JSON.parse(e);i.pingtai_login(t)},function(e){alert("encoding failed: "+e)})},t.$on("User.loginUpdated",function(){var e=i.getCurrentUser();if(0!=e.status){if(1==e.status){n.show({noBackdrop:!0,template:"登录成功",duration:1e3}),d.set("user",e),u.set_userinfo(e.data.userid,e.data.random),n.show({noBackdrop:!0,template:"即将为您返回之前页面...",duration:1e3});s(function(){return"/tab/user/forget"==url||"/tab/user/forget_2"==url?(o.go("tab.user"),!1):void a.goBack(-1)},1e3);return window.plugins.jPushPlugin.setAlias(e.data.userid),!1}return n.show({noBackdrop:!0,template:"非法登录请求",duration:1500}),!1}n.show({noBackdrop:!0,template:e.msg,duration:2e3})})}]).controller("Userforget",["$scope","$rootScope","$state","$ionicLoading","$ionicHistory","UserForgetFactory",function(e,t,o,r,a,n){e.$on("$ionicView.beforeEnter",function(){a.nextViewOptions({disableBack:!0}),t.hideTabs="tabs-item-hide"}),e.set_username=function(e){var t=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,o=/^1[3|4|5|8][0-9]\d{4,8}$/;if(t.test(e))username_type="邮箱:"+e;else{if(!o.test(e))return r.show({noBackdrop:!0,template:"您输入不是手机或者邮箱",duration:1e3}),!1;username_type="手机"+e}n.set_username(e),r.show({noBackdrop:!0,template:"正在提交...",duration:1e3})},e.$on("Userforget.set_username",function(){var e=n.get_username();0==e.status?r.show({noBackdrop:!0,template:e.msg,duration:2e3}):1==e.status?r.show({noBackdrop:!0,template:"验证码已成功发送至您"+username_type,duration:2e3}):r.show({noBackdrop:!0,template:"亲，程序猿哥哥正在抢修！",duration:1500})}),e.set_username_code=function(e,o){t.user_name=e,n.set_username_code(e,o),r.show({noBackdrop:!0,template:"正在提交...",duration:1e3})},e.$on("Userforget.set_username_code",function(){var e=n.get_username_code();return 0==e.status?(r.show({noBackdrop:!0,template:e.msg,duration:2e3}),!1):void(1==e.status?(r.show({noBackdrop:!0,template:e.msg,duration:2e3}),o.go("tab.user_forget2")):r.show({noBackdrop:!0,template:"亲，程序猿哥哥正在抢修！",duration:1500}))}),e.set_username_password=function(e,o){var a=n.get_username_code(),s=a.data.userid,i=a.data.random;return e!==o?(r.show({noBackdrop:!0,template:"亲 两次密码不一致,请检查",duration:2e3}),!1):(n.set_username_password(t.user_name,s,e,i),void r.show({noBackdrop:!0,template:"正在提交...",duration:1e3}))},e.$on("Userforget.set_username_password",function(){var e=n.get_username_password();return 0==e.status?(r.show({noBackdrop:!0,template:e.msg,duration:2e3}),!1):1!=e.status?(r.show({noBackdrop:!0,template:"亲，程序猿哥哥正在抢修！",duration:1500}),!1):(r.show({noBackdrop:!0,template:e.msg,duration:2e3}),void o.go("tab.user_login"))})}]).controller("User_register",["$ionicPlatform","$rootScope","$scope","$state","$ionicLoading","$interval","User_registerFactory","StorageFactory","User_register1Factory",function(e,t,o,r,a,n,s,i,d){o.register=function(e,t,o,r){return o!==r?(a.show({noBackdrop:!0,template:"两次输入的密码不匹配...",duration:1e3}),!1):(a.show({noBackdrop:!0,template:"正在提交...",duration:1e3}),void d.set_register(e,t,o))},o.$on("User_register1Factory.setregister",function(){var e=d.get_register();return 0==e.status?(a.show({noBackdrop:!0,template:e.msg,duration:1e3}),!1):1==e.status?(a.show({noBackdrop:!0,template:e.msg,duration:1e3}),window.plugins.jPushPlugin.setAlias(userRel.data.userid),r.go("tab.user"),!1):void a.show({noBackdrop:!0,template:"亲程序员哥哥正在抢修,请稍后",duration:1e3})}),o.text="获取验证码",o.getsms=function(e){o.isDisabled=!0,s.getsms(e),o.$on("NewsContent.getsms",function(){var t=s.setsms();return 0==t.status?(o.isDisabled=!1,a.show({noBackdrop:!0,template:t.msg,duration:1e3}),!1):void(1==t.status?(s.send_sms(e),o.$on("NewsContent.sendsms",function(){var t=s.get_send_sms();if(0==t.status)return a.show({noBackdrop:!0,template:t.msg,duration:1500}),o.isDisabled=!0,!1;if(1==t.status){a.show({noBackdrop:!0,template:"验证码已发送到您手机:"+e,duration:1e3});var r=60;o.text="请等待"+r+"秒",o.isDisabled=!0;var i=n(function(){r--,o.text="请等待"+r+"秒",0==r&&(n.cancel(i),o.text="再次获取",o.isDisabled=!1)},1e3)}})):(a.show({noBackdrop:!0,template:"发送失败，请重新获取！",duration:1e3}),o.isDisabled=!1))})}}]).controller("UserPersonal",["$scope","$rootScope","$ionicLoading","$state","$ionicActionSheet","$timeout","UserloginFactory","StorageFactory","UserPersonalFactory",function(e,t,o,r,a,n,s,i,d){var u="user";e.$on("$ionicView.beforeEnter",function(){return t.hideTabs="tabs-item-hide",!i.get(u)||i.get(u)&&1!=i.get(u).status?(r.go("tab.user_login"),!1):(userid=i.get(u).data.userid,random=i.get(u).data.random,void d.set_userinfo(userid,random))}),e.showloading=!0,e.random=i.get("user").data,e.$on("UserPersonal.set_userinfo",function(){return e.userInfo=d.get_userinfo(),0==e.userInfo.status?(r.go("tab.user_login"),i.remove2(),!1):(i.set("profile",e.userInfo),void(e.showloading=!1))}),e.doRefresh=function(){d.set_userinfo(userid,random),e.$broadcast("scroll.refreshComplete")},e.profile_nickname=function(){r.go("tab.user_profile_nickname")},e.profile_phone=function(){r.go("tab.user_profile_nickname")},e.profile_qq=function(){r.go("tab.user_profile_qq")},e.profile_email=function(){r.go("tab.user_profile_email")},e.profile_address=function(){r.go("tab.user_profile_address")},e.profile_password=function(){r.go("tab.user_profile_password")},e.profile_taobao=function(){r.go("tab.user_profile_taobao")},e.profile_card=function(){r.go("tab.user_profile_card")},e.profile_allpay=function(){if(1==e.userInfo.name_status)r.go("tab.user_profile_alipay");else if(""==e.userInfo.name_status||null==e.userInfo.name_status)o.show({noBackdrop:!0,template:"您还未进行实名认证,请先认证",duration:1500}),r.go("tab.user_profile_card");else{if(0==e.userInfo.name_status)return o.show({noBackdrop:!0,template:"您的实名认证正在审核,请耐心等待,审核通过即可绑定",duration:1500}),!1;-1==e.userInfo.name_status&&(o.show({noBackdrop:!0,template:"您的实名认证未通过审核,请先进行修改 ",duration:1500}),r.go("tab.user_profile_card"))}},e.profile_bankcard=function(){if(1==e.userInfo.name_status)r.go("tab.user_profile_bankcard");else if(""==e.userInfo.name_status||null==e.userInfo.name_status)o.show({noBackdrop:!0,template:"您还未进行实名认证,请先认证",duration:1500}),r.go("tab.user_profile_card");else{if(0==e.userInfo.name_status)return o.show({noBackdrop:!0,template:"您的实名认证正在审核,请耐心等待,审核通过即可绑定",duration:1500}),!1;-1==e.userInfo.name_status&&(o.show({noBackdrop:!0,template:"您的实名认证未通过审核,请先进行修改 ",duration:1500}),r.go("tab.user_profile_card"))}},e.logout=function(){var e=a.show({destructiveText:"退出登录",titleText:"确定退出当前登录账号么？",cancelText:"取消",cancel:function(){},destructiveButtonClicked:function(){return c(),!0}});n(function(){e()},3e3)};var c=function(){s.logout(),r.go("tab.user")};e.$on("$ionicView.afterEnter",function(){e.showloading=!1})}]).controller("UserProfileHobby",["$scope","$state","$ionicModal",function(e,t,o){o.fromTemplateUrl("b.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t}),e.Hobby=function(){e.modal.show()},e.openModal=function(){e.modal.show()},e.closeModal=function(){e.modal.hide()},e.$on("$destroy",function(){e.modal.remove()}),e.$on("modal.hide",function(){}),e.$on("modal.removed",function(){})}]).controller("UserProfileNiknname",["$rootScope","$scope","$ionicLoading","$state","$ionicModal","$ionicActionSheet","$cordovaActionSheet","$cordovaImagePicker","$cordovaCamera","StorageFactory","UserProfileFactory","uploadFactory","ENV",function(e,t,o,r,a,n,s,i,d,u,c,l,_){t.$on("$ionicView.beforeEnter",function(){return e.hideTabs="tabs-item-hide",!u.get("user")||u.get("user")&&1!=u.get("user").status?(alert(),r.go("tab.user_login"),u.remove2(),!1):(userid=u.get("user").data.userid,void(random=u.get("user").data.random))});var g=_.imgUrl;t.user_avatar=g+u.get("profile").avatar,t.user_nickname={nickname:u.get("profile").nickname},t.$on("UserProfileFactory.set_nickname",function(){t.data_nickname=c.get_nickname(),o.show({noBackdrop:!0,template:t.data_nickname.msg,duration:1500}),t.showloading=!1,r.go("tab.user_profile")}),t.imgurl=function(e){var o={title:"选择图片上传方式？",buttonLabels:["拍照","图库"],addCancelButtonWithLabel:"取消",androidEnableCancelButton:!0,winphoneEnableCancelButton:!0};document.addEventListener("deviceready",function(){s.show(o).then(function(o){1==o?t.takePhoto(e):2==o&&t.addAttachment(e)})},!1)},t.addAttachment=function(){var e={maximumImagesCount:1,width:200,height:200,quality:80};i.getPictures(e).then(function(e){for(var o=0;o<e.length;o++)t.user_avatar=e[o];l.set_upload(t.user_avatar)},function(e){o.show({noBackdrop:!0,template:"文件选择失败 请重试",duration:2e3})})},t.takePhoto=function(){var e={destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA,targetWidth:200,targetHeight:200,quality:50};d.getPicture(e).then(function(e){t.user_avatar=e,l.set_upload(t.user_avatar)},function(e){o.show({noBackdrop:!0,template:"拍照失败 请重试",duration:2e3})})},t.$on("uploadFactory.set_upload",function(){o.show({noBackdrop:!0,template:"头像已上传",duration:1e3}),t.response=l.get_upload();for(x in t.response)1==x&&(t.user_avatar2=t.response[x])}),t.userInfo_nickname=function(){o.show({noBackdrop:!0,template:"正在提交...",duration:1500}),c.set_nickname(userid,random,t.user_nickname.nickname,t.user_avatar2)}}]).controller("UserProfilePhone",["$scope","$state","$interval","$ionicLoading","StorageFactory","User_registerFactory","UserProfileFactory",function(e,t,o,r,a,n,s){var i="user";if(!a.get(i)||a.get(i)&&1!=a.get(i).status)return t.go("tab.user_login"),!1;var d=a.get(i).data.userid,u=a.get(i).data.random;e.user_profile=a.get("profile"),e.text="获取验证码",e.isDisabled=!1,e.UserPersonal_getsms=function(t){return t==e.user_profile.phone&&1==e.user_profile.phone_status?(r.show({noBackdrop:!0,template:"亲,您修改的手机号不能和旧手机一致",duration:1e3}),!1):(e.isDisabled=!0,n.getsms(t),void e.$on("NewsContent.getsms",function(){var a=n.setsms();0==a.status?(e.isDisabled=!1,e.user_phone_state=!0,r.show({noBackdrop:!0,template:a.msg,duration:1e3})):1==a.status?(n.send_sms(t),e.$on("NewsContent.sendsms",function(){var a=n.get_send_sms();if(0==a.status)return r.show({noBackdrop:!0,template:a.msg,duration:1500}),void(e.isDisabled=!0);if(1==a.status){r.show({noBackdrop:!0,template:"验证码已发送到您手机！"+t,duration:1e3});var s=60;e.text="请等待"+s+"秒",e.isDisabled=!0;var i=o(function(){s--,e.text="请等待"+s+"秒",0==s&&(o.cancel(i),e.text="再次获取",e.isDisabled=!1)},1e3)}})):(r.show({noBackdrop:!0,template:"发送失败，请重新获取！",duration:1e3}),e.isDisabled=!1)}))},e.edit_phone=function(o,a){return o==e.user_profile.phone&&1==e.user_profile.phone_status?(r.show({noBackdrop:!0,template:"亲,您修改的手机号不能和旧手机一致",duration:1e3}),!1):(s.set_edit_phone(o,a,d,u),r.show({noBackdrop:!0,template:"正在提交...",duration:1e3}),void t.go("tab.user_profile"))},e.$on("UserProfileFactory.set_edit_phone",function(){var e=s.get_edit_phone();0==e.status?r.show({noBackdrop:!0,template:e.msg,duration:2e3}):1==e.status?r.show({noBackdrop:!0,template:e.msg,duration:2e3}):r.show({noBackdrop:!0,template:"亲，程序猿哥哥正在抢修！",duration:1500})})}]).controller("UserProfileQQ",["$scope","$state","$interval","$ionicLoading","StorageFactory","UserProfileFactory",function(e,t,o,r,a,n){var s="user";if(!a.get(s)||a.get(s)&&1!=a.get(s).status)return t.go("tab.user_login"),!1;var i=a.get(s).data.userid,d=a.get(s).data.random;e.edit_qq=function(e){return e==a.get("profile").qq?(r.show({noBackdrop:!0,template:"亲，要修改的qq不能和老qq一样,不修改请直接返回",duration:1500}),!1):(r.show({noBackdrop:!0,template:"正在提交...",duration:1e3}),void n.set_username_qq(e,i,d))},e.$on("UserProfileFactory.set_username_qq",function(){return userRel=n.get_username_qq(),0==userRel.status?(r.show({noBackdrop:!0,template:userRel.msg,duration:2e3}),!1):1!=userRel.status?(r.show({noBackdrop:!0,template:"亲，程序猿哥哥正在抢修！",duration:1500}),!1):(r.show({noBackdrop:!0,template:userRel.msg,duration:2e3}),void t.go("tab.user_profile"))})}]).controller("UserProfileEmail",["$scope","$state","$interval","$ionicLoading","UserForgetFactory","StorageFactory","UserProfileFactory",function(e,t,o,r,a,n,s){var i="user";if(!n.get(i)||n.get(i)&&1!=n.get(i).status)return t.go("tab.user_login"),!1;var d=n.get(i).data.userid;e.user_email_state=n.get("profile").email_status,e.user_old_email=n.get("profile").email,e.user_email=1==e.user_email_state?"":e.user_old_email;var u=n.get(i).data.random;e.get_emailsms=function(t){var o=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(!o.test(t))return r.show({noBackdrop:!0,template:"您输入的不是邮箱",duration:1e3}),!1;if(username_type="邮箱:"+t,t==e.user_old_email&&1==e.user_email_state)return r.show({noBackdrop:!0,template:"亲 新旧邮箱不能一致！",duration:1e3}),!1;var a="邮箱认证码";s.set_send_email_code(t,a,d,u),r.show({noBackdrop:!0,template:"正在提交...",duration:1e3})},e.$on("UserProfileFactory.set_send_email_code",function(){return userRel=s.get_send_email_code(),void 0==userRel?!1:void(0==userRel.status?r.show({noBackdrop:!0,template:userRel.msg,duration:2e3}):1==userRel.status?r.show({noBackdrop:!0,template:"验证码已成功发送到"+username_type,duration:2e3}):r.show({noBackdrop:!0,template:"亲，程序猿哥哥正在抢修！",duration:1500}))}),e.edit_email=function(t,o){return t==e.user_old_email&&1==e.user_email_state?(r.show({noBackdrop:!0,template:"亲 新旧邮箱不能一致！",duration:1e3}),!1):(s.set_username_email(t,o,d,u),void r.show({noBackdrop:!0,template:"正在提交...",duration:1e3}))},e.$on("UserProfileFactory.set_username_email",function(){return userRel=s.get_username_email(),void 0==userRel?!1:void(0==userRel.status?r.show({noBackdrop:!0,template:userRel.msg,duration:2e3}):1==userRel.status?(r.show({noBackdrop:!0,template:userRel.msg,duration:2e3}),t.go("tab.user_profile")):r.show({noBackdrop:!0,template:"亲，程序猿哥哥正在抢修！",duration:1500}))})}]).controller("UserProfileAddress",["$scope","$state","$interval","$ionicLoading","StorageFactory","UserProfileFactory",function(e,t,o,r,a,n){function s(t){e.province=n.set_username_address(t)}function i(t){e.city=n.set_username_address(t)}var d="user";if(!a.get(d)||a.get(d)&&1!=a.get(d).status)return t.go("tab.user_login"),!1;var u=a.get(d).data.userid,c=a.get(d).data.random;n.set_username_Profile_address(u,c),e.$on("UserProfileFactory.set_username_Profile_address",function(){var t=n.get_username_Profile_address();e.data_address=t.data;var o=t.data;e.d1=o.provice_name?o.provice_name:"请选择省",e.d2=o.city_name?o.city_name:"请选择市",e.d3=o.area_name?o.area_name:"请选择县/区";var r=o.provice,a=o.area;s(r),a&&i(a),""==o.area?e.b3=!1:e.b3=!0}),e.CityData=n.set_username_address(0);var l=e.vm={};e.$watch("vm.country",function(t){if(l.city=null,!t)return!1;var o=t;e.province=n.set_username_address(o.linkageid),e.d2="请选择市",e.d3="请选择县/区",e.b3=!1,e.country_linkageid=o.linkageid}),e.$watch("vm.province",function(t){if(e.city_linkageid="",!t)return!1;n.set_username_address(t.linkageid);e.city=n.set_username_address(t.linkageid),e.d3="请选择县/区",e.province_linkageid=t.linkageid}),e.$watch("vm.city",function(t){return t?void(e.city_linkageid=t.linkageid):!1}),e.edit_address=function(e,t,o,a,s,i){var d=n.get_username_Profile_address();e=e?e:d.data.provice,t=t?t:d.data.city,o=o?o:"",n.set_username_Profile_edit_address(e,t,o,a,s,i,u,c),r.show({noBackdrop:!0,template:"正在提交...",duration:2e3})},e.$on("UserProfileFactory.set_username_Profile_edit_address",function(){var e=n.get_username_Profile_edit_address();return 0==e.status?(r.show({noBackdrop:!0,template:e.msg,duration:2e3}),!1):void(1==e.status?(r.show({noBackdrop:!0,template:e.msg,duration:2e3}),t.go("tab.user_profile")):r.show({noBackdrop:!0,template:"亲，您没有修改您的地址信息,不修改请直接返回！",duration:1500}))})}]).controller("UserProfilePassword",["$scope","$state","$interval","$ionicLoading","UserloginFactory","StorageFactory","UserProfileFactory",function(e,t,o,r,a,n,s){var i="user";if(!n.get(i)||n.get(i)&&1!=n.get(i).status)return t.go("tab.user_login"),!1;var d=n.get(i).data.userid,u=n.get(i).data.random;e.edit_password=function(e,t){return e==t?(r.show({noBackdrop:!0,template:"亲，旧密码和新密码不能相同",duration:1e3}),!1):(s.set_update_pwd(e,t,d,u),void r.show({noBackdrop:!0,template:"正在提交...",duration:1e3}))},e.$on("UserProfilePassword.set_update_pwd",function(){var e=s.get_update_pwd();0==e.status?r.show({noBackdrop:!0,template:e.msg,duration:2e3}):1==e.status?(r.show({noBackdrop:!0,template:"修改密码成功,快来登录验证一下",duration:2e3}),a.logout(),t.go("tab.user_login")):r.show({noBackdrop:!0,template:"亲，程序猿哥哥正在抢修！",duration:1500})})}]).controller("UserProfiletaobao",["$scope","$rootScope","$ionicActionSheet","$timeout","$state","$ionicLoading","StorageFactory","UserProfileFactory",function(e,t,o,r,a,n,s,i){e.$on("$ionicView.beforeEnter",function(){return!s.get("user")||s.get("user")&&1!=s.get("user").status?(a.go("tab.user_login"),!1):(t.hideTabs="tabs-item-hide",userid=s.get("user").data.userid,random=s.get("user").data.random,void i.set_username_taobao(userid,random))}),e.$on("UserProfileFactory.set_username_taobao",function(){e.data_bind_taobao=i.get_username_taobao()}),e.delete_taobao=function(e){var t=e;o.show({buttons:[{text:'<i class="icon ion-share"></i> 设为默认'},{text:'<i class="icon ion-arrow-move"></i> 解除绑定'},{text:'<i class="icon ion-arrow-move"></i>取消操作 '}],titleText:"您想要进行的操作?",cancelText:"取消",cancel:function(){},destructiveButtonClicked:function(){return!0},buttonClicked:function(e){return 0==e?(i.set_bind_taobao_setdefault(t,userid,random),n.show({noBackdrop:!0,template:"正在提交,请稍等..."}),!0):1==e?(i.set_bind_del_tb(t,userid,random),n.show({noBackdrop:!0,template:"正在提交...",duration:1e3}),!0):2==e?!0:void 0}})},e.bind_taobao=function(e){n.show({noBackdrop:!0,template:"查询中,请稍等..."}),i.set_bind_taobao(e,userid,random)},e.$on("UserProfileFactory.set_bind_taobao",function(){var e=i.get_bind_taobao();0==e.status?n.show({noBackdrop:!0,template:e.msg,duration:2e3}):1==e.status?(i.set_username_taobao2(userid,random),n.show({noBackdrop:!0,template:e.msg,duration:2e3})):n.show({noBackdrop:!0,template:"亲，程序猿哥哥正在抢修！",duration:1500})}),e.$on("UserProfileFactory.set_bind_taobao_setdefault",function(){var e=i.get_bind_taobao_setdefault();return i.set_username_taobao(userid),n.show({noBackdrop:!0,template:e.msg,duration:1e3}),!0}),e.$on("UserProfileFactory.set_bind_del_tb",function(){var e=i.get_bind_del_tb();1==e.status&&i.set_username_taobao2(userid,random),n.show({noBackdrop:!0,template:e.msg,duration:1e3})})}]).controller("UserProfileCard",["$rootScope","$scope","$state","$interval","$cordovaActionSheet","$cordovaImagePicker","$cordovaCamera","$ionicLoading","StorageFactory","UserProfileFactory","ENV","uploadFactory",function(e,t,o,r,a,n,s,i,d,u,c,l){return t.$on("$ionicView.beforeEnter",function(){return e.hideTabs="tabs-item-hide",!d.get("user")||d.get("user")&&1!=d.get("user").status?(o.go("tab.user_login"),!1):(userid=d.get("user").data.userid,random=d.get("user").data.random,void(t.name_status=d.get("profile").name_status))}),1==t.name_status?(i.show({noBackdrop:!0,template:"您已经通过实名认证，无需在认证！",duration:2e3}),o.go("tab.user_profile"),!1):0==t.name_status?(i.show({noBackdrop:!0,template:"您的实名认证正在审核中，请耐心等待！",duration:2e3}),o.go("tab.user_profile"),!1):(t.face_img="img/face_img.jpg",t.back_img="img/back_img.jpg",t.person_img="img/person_img.jpg",t.imgurl=function(e){var o={title:"选择图片上传方式？",buttonLabels:["拍照","图库"],addCancelButtonWithLabel:"取消",androidEnableCancelButton:!0,winphoneEnableCancelButton:!0};document.addEventListener("deviceready",function(){a.show(o).then(function(o){1==o?t.takePhoto(e):2==o&&t.addAttachment(e)})},!1)},t.addAttachment=function(e){var o={maximumImagesCount:1,width:800,height:800,quality:80};n.getPictures(o).then(function(o){for(var r=0;r<o.length;r++)1==e&&(t.face_img=o[r]),2==e&&(t.back_img=o[r]),3==e&&(t.person_img=o[r]),l.set_upload(o[r],e)},function(e){i.show({noBackdrop:!0,template:"文件选择失败 请重试",duration:2e3})})},t.takePhoto=function(e){var o={destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA,targetWidth:600,targetHeight:600,quality:50};s.getPicture(o).then(function(o){1==e&&(t.face_img=o),2==e&&(t.back_img=o),3==e&&(t.person_img=o),l.set_upload(o,e)},function(e){i.show({noBackdrop:!0,template:"拍照失败 请重试",duration:2e3})})},t.$on("uploadFactory.set_upload",function(){i.show({noBackdrop:!0,template:"图片已成功上传",duration:2e3}),t.response=l.get_upload();var e=c.imgUrl;for(x in t.response)1==x&&(t.face_img=e+t.response[x]),2==x&&(t.back_img=e+t.response[x]),3==x&&(t.person_img=e+t.response[x])}),t.edit_identity=function(e,o,r,a,n,s,d,c,l,_){"img/face_img.jpg"==t.face_img&&""==t.face_img,"img/back_img.jpg"==t.fback_img&&""==t.fback_img,"img/person_img.jpg"==t.person_img&&""==t.person_img,i.show({noBackdrop:!0,template:"正在提交",duration:2e3}),u.set_username_Profile_edit_identity(e,o,t.face_img,t.fback_img,t.person_img,s,d,c,l,_,userid,random)},t.$on("UserProfileFactory.set_username_Profile_edit_identity",function(){var e=u.get_username_Profile_edit_identity();
return 0==e.status?(i.show({noBackdrop:!0,template:e.msg,duration:2e3}),!1):1!=e.status?(i.show({noBackdrop:!0,template:"亲，程序猿哥哥正在抢修！",duration:1500}),!1):(i.show({noBackdrop:!0,template:e.msg,duration:2e3}),void o.go("tab.user_profile"))}),void(t.user_ID_number=""))}]).controller("UserProfileAllpay",["$scope","$state","$ionicLoading","StorageFactory","UserProfileFactory",function(e,t,o,r,a){var n="user";if(!r.get(n)||r.get(n)&&1!=r.get(n).status)return t.go("tab.user_login"),!1;e.user_Real_name=r.get("profile").name,e.name_authentication_status=r.get("profile").name_status;var s=r.get(n).data.userid,i=r.get(n).data.random;return 1==r.get("profile").alipay_status?(o.show({noBackdrop:!0,template:"您已绑定支付宝，如需修改请联系平台客服！",duration:2e3}),!1):1!=e.name_authentication_status?(o.show({noBackdrop:!0,template:"您还未通过实名认证",duration:1e3}),t.go("tab.user_profile"),!1):(e.edilt_allpay=function(e){o.show({noBackdrop:!0,template:"正在提交..",duration:1e3}),a.set_bind_alipay_info(e,s,i)},void e.$on("UserProfileFactory.set_bind_alipay_info",function(){var e=a.get_bind_alipay_info();return 0==e.status?(o.show({noBackdrop:!0,template:e.msg,duration:2e3}),!1):1!=e.status?(o.show({noBackdrop:!0,template:"亲，程序猿哥哥正在抢修！",duration:1500}),!1):(o.show({noBackdrop:!0,template:e.msg,duration:2e3}),void t.go("tab.user_profile"))}))}]).controller("UserProfileBankCard",["$scope","$state","$ionicLoading","StorageFactory","UserProfileFactory",function(e,t,o,r,a){var n="user";if(!r.get(n)||r.get(n)&&1!=r.get(n).status)return t.go("tab.user_login"),!1;if(1==r.get("profile").bank_status)return o.show({noBackdrop:!0,template:"您已绑定银行卡，如需修改请联系平台客服！",duration:2e3}),!1;var s=r.get(n).data.userid;e.user_Real_name=r.get("profile").name,e.name_authentication_status=r.get("profile").name_status,e.bank_info=a.get_bank_info(),e.CityData=a.set_username_address(0);var i=e.vm={};e.$watch("vm.bank_name",function(t){return t?(e.d2="请选择市",e.d3="请选择县/区",void(e.b3=!1)):!1}),e.$watch("vm.country",function(t){if(i.city=null,!t)return!1;var o=t;e.province=a.set_username_address(o.linkageid),e.d2="请选择市",e.d3="请选择县/区",e.b3=!1,e.country_linkageid=o.linkageid}),e.$watch("vm.province",function(t){if(i.city=null,e.city_linkageid="",!t)return!1;a.set_username_address(t.linkageid);e.city=a.set_username_address(t.linkageid),e.d3="请选择县/区",e.province_linkageid=t.linkageid}),e.$watch("vm.city",function(t){return t?void(e.city_linkageid=t.linkageid):!1});var d=r.get(n).data.random;e.edilt_bank=function(t,r,n){return t=t.replace(/\s/g,""),e.country_linkageid&&e.province_linkageid&&r?(o.show({noBackdrop:!0,template:"正在提交...",duration:1e3}),void a.set_bind_bank_info(t,r,n,e.country_linkageid,e.province_linkageid,e.city_linkageid,s,d)):(o.show({noBackdrop:!0,template:"请完善开户银行,所在省,市",duration:1e3}),!1)},e.$on("UserProfileFactory.set_bind_bank_info",function(){var e=a.get_bind_bank_info();return 0==e.status?(o.show({noBackdrop:!0,template:e.msg,duration:2e3}),!1):1!=e.status?(o.show({noBackdrop:!0,template:"亲，程序猿哥哥正在抢修！",duration:1500}),!1):(o.show({noBackdrop:!0,template:e.msg,duration:2e3}),void t.go("tab.user_profile"))})}]).controller("UserDeposite",["$rootScope","$scope","$state","$ionicModal","$ionicLoading","StorageFactory","UserProfileFactory","UserPersonalFactory","UserDepositeFactory",function(e,t,o,r,a,n,s,i,d){return t.showloading=!0,t.$on("$ionicView.beforeEnter",function(){return e.hideTabs="tabs-item-hide",!n.get("user")||n.get("user")&&1!=n.get("user").status?(o.go("tab.user_login"),!1):(d.set_cash_config_info(),userid=n.get("user").data.userid,random=n.get("user").data.random,t.money=n.get("profile").money,t.user_Real_name=n.get("profile").name,t.name_authentication_status=n.get("profile").name_status,t.allpay_status=n.get("profile").alipay_status,t.bank_status=n.get("profile").bank_status,void d.set_useraccount(userid,random))}),t.Present_method=0,t.Member_group=n.get("profile").groupid,t.a_status=2,t.paypal=1,t.hasNextPage=!1,1==t.allpay_status||0==t.bank_status?(a.show({noBackdrop:!0,template:"亲,您还未绑定支付宝或者银行卡,先绑定才能进行提现",duration:2e3}),o.go("tab.user_profile"),!1):(t.$on("UserDepositeFactory.set_useraccount",function(){t.Bank_account=d.get_useraccount()}),t.$on("UserDepositeFactory.set_cash_config_info",function(){if(t.showloading=!1,t.bank_configure=d.get_cash_config_info(),!t.bank_configure.cash_type)return!1;var e=t.bank_configure.cash_type[0],o=t.bank_configure.cash_type[1];e||o?"bank"==e?(t.deposite_status="平台支持提现到银行卡",t.d_status=1,t.a_status=1):e&&!o?(t.deposite_status="平台支持提现到支付宝",t.d_status=2,t.c_status=1):e&&o&&(t.deposite_status="平台支持提现到支付宝和银行卡",t.b_status=3,t.d_status=3,t.c_status=1,1!=t.allpay_status&&1==t.bank_status&&(t.a_status=1)):(t.deposite_status="平台维护中,暂时关闭提现",t.d_status=0),0==t.Member_group&&(t.service_fee=0==t.bank_configure.service_fee?"活动中,免手续费":"每笔收取"+t.bank_configure.service_fee+"% 手续费",t.service_Counter_Fee=t.bank_configure.service_fee),1==t.Member_group&&(t.service_fee=0==t.bank_configure.vip_service_fee?"vip尊享,免手续费 ":"vip尊享"+t.bank_configure.vip_service_fee+"% 手续费",t.service_Counter_Fee=t.bank_configure.vip_service_fee)}),t.person_cash=function(e,o,r){return e=e-1+1,r=r-1+1,e>t.money?(a.show({noBackdrop:!0,template:"亲，提现金额不能大于账户余额!",duration:2e3}),!1):r<t.bank_configure.min_money?(a.show({noBackdrop:!0,template:"亲，提现金额不能低于"+t.bank_configure.min_money+"元",duration:2e3}),!1):void d.set_person_cash(e,o,t.paypal,userid,random)},t.$on("UserDepositeFactory.set_person_cash",function(){var e=d.get_person_cash();return 0==e.status?(a.show({noBackdrop:!0,template:e.msg,duration:2e3}),!1):1!=e.status?(a.show({noBackdrop:!0,template:"亲，程序猿哥哥正在抢修！",duration:1500}),!1):(a.show({noBackdrop:!0,template:e.msg,duration:2e3}),i.set_userinfo(userid,random),o.go("tab.user_deposite_record"),void 0)}),t.changeTab=function(e,o){t.paypal=o,t.Present_method=e},$(".bar-subheader .button").bind("click",function(){$(".bar-subheader .button").attr("class","button button-clear"),$(this).attr("class","button button-clear sub_button_select")}),t.Present_method1=function(){t.a_status=1},t.Present_method2=function(){t.a_status=2},t.deposite_record=function(){o.go("tab.user_deposite_record"),d.set_getusercashlog(userid,random)},t.txjl_doRefresh=function(){d.set_getusercashlog(userid,random),t.$broadcast("scroll.refreshComplete")},t.loadMore=function(){t.hasNextPage=!1,d.txjl_loadMore(userid,random),t.$broadcast("scroll.infiniteScrollComplete")},t.tixian_log_showloading=!0,void t.$on("UserDepositeFactory.set_getusercashlog",function(){t.getusercashlog_data=d.get_getusercashlog(),t.hasNextPage=d.hasNextPage(),t.tixian_log_showloading=!1}))}]).controller("UserLog",["$rootScope","$scope","$state","$ionicLoading","StorageFactory","UserLogFactory",function(e,t,o,r,a,n){if(!a.get("user")||a.get("user")&&1!=a.get("user").status)return o.go("tab.user_login"),!1;t.$on("$ionicView.beforeEnter",function(){e.hideTabs="tabs-item-hide"});var s=a.get("user").data.userid,i=a.get("user").data.random;n.set_user_log(1,s,i),t.money=a.get("profile").money,t.zhmx_hasNextPage=!1,t.zhmx_showloading=!0,t.$on("UserLogFactory.set_user_log",function(){t.log_data=n.get_user_log(),t.zhmx_hasNextPage=n.hasNextPage(),t.zhmx_showloading=!1,t.$broadcast("scroll.infiniteScrollComplete")}),t.zhmx_doRefresh=function(){n.set_user_log(s,i),t.$broadcast("scroll.refreshComplete")},t.loadMore=function(){n.zhmx_loadMore(s,i)},t.zhmx_changeTab=function(e,o){t.zhmx_showloading=!0,n.set_user_log(o,s,i)},$(".bar-subheader .button").bind("click",function(){$(".bar-subheader .button").attr("class","button button-clear"),$(this).attr("class","button button-clear sub_button_select")})}]).controller("trial_order",["$timeout","$scope","$state","$ionicPopup","$ionicModal","$ionicLoading","ENV","StorageFactory","UserProfileFactory","trialOrderFactory","configFactory",function(e,t,o,r,a,n,s,i,d,u,c){t.$on("$ionicView.beforeEnter",function(){!i.get("user")||i.get("user")&&1!=i.get("user").status?(t.userInfo="",t.logo_status=0):(userid=i.get("user").data.userid,random=i.get("user").data.random,u.set_getorderlists(userid,"trial",l,random))}),t.ENV=s;var l=1;t.wdsy_hasNextPage=!1,c.set_trial_config(),$(".bar-subheader .button").bind("click",function(){$(".bar-subheader .button").attr("class","button button-clear"),$(this).attr("class","button button-clear sub_button_select")}),t.$on("configFactory.set_trial_config",function(){var e=c.get_trial_config();t.seller_check_time=86400*e.data.seller_check_time,t.buyer_write_order_time=3600*e.data.buyer_write_order_time,t.buyer_write_talk_time=86400*e.data.buyer_write_talk_time,t.seller_trialtalk_check=86400*e.data.seller_trialtalk_check.value,t.seller_order_check_time=3600*e.data.seller_order_check_time,t.buyer_check_update_order_sn=3600*e.data.buyer_check_update_order_sn}),t.$on("trialOrderFactory.set_getorderlists",function(){t.wdsy_showloading=!1,t.trial_getorderlists=u.get_getorderlists(),t.wdsy_hasNextPage=u.get_wdsy_hasNextPage(),t.$broadcast("scroll.infiniteScrollComplete")}),t.add_order_number=function(e,t,r,a){return 1==r?(o.go("tab.show_trial",{id:t}),!1):void(2==r||4==r&&!a?o.go("tab.trial_order_id",{id:e,goodid:t}):8==r||4==r&&a?o.go("tab.trial_order_report",{id:e,goodid:t}):o.go("tab.show_trial",{id:t}))},t.trial_order_changeTab=function(e,o){l=o,t.wdsy_showloading=!0,u.set_getorderlists(userid,"trial",l,random)},t.wdsy_doRefresh=function(){u.set_getorderlists(userid,"trial",l,random),t.$broadcast("scroll.refreshComplete")},t.wdsy_loadMore=function(){u.wdsy_loadMore(userid,"trial",l,random)},t.abandon_application=function(e){t.add_order_number=function(){return!1},r.confirm({title:"放弃申请",template:"一旦放弃申请,则不可再申请该试用商品,您确定要放弃申请？",cancelText:"取消",cancelType:"",okText:"确定",okType:""}).then(function(r){0==r?t.add_order_number=function(e,t,r){return 1==r?(o.go("tab.show_trial",{id:t}),!1):void(2==r||4==r?o.go("tab.trial_order_id",{id:e,goodid:t}):8==r?o.go("tab.trial_order_report",{id:e,goodid:t}):o.go("tab.trial_order_id",{id:e,goodid:t}))}:u.set_close_order_sn(e,userid,random)})},t.$on("trialOrderFactory.set_close_order_sn",function(){t.add_order_number=function(e,t,r){return 1==r?(o.go("tab.show_trial",{id:t}),!1):void(2==r||4==r?o.go("tab.trial_order_id",{id:e,goodid:t}):8==r?o.go("tab.trial_order_report",{id:e,goodid:t}):o.go("tab.trial_order_id",{id:e,goodid:t}))};var e=u.get_close_order_sn();n.show({noBackdrop:!0,template:e.msg,duration:1e3}),u.set_getorderlists(userid,"trial",-1,random);var r=document.getElementById("sub_header_list").getElementsByTagName("a");r[0].className="button button-clear sub_button_select"})}]).controller("trial_order_add",["$rootScope","$interval","$filter","$ionicActionSheet","$location","$scope","$state","$stateParams","$ionicPopup","$ionicModal","$ionicLoading","$cordovaActionSheet","$cordovaImagePicker","$cordovaCamera","ENV","StorageFactory","rebate_showFactory","UserProfileFactory","trialOrderFactory","configFactory","uploadFactory",function(e,t,o,r,a,n,s,i,d,u,c,l,_,g,p,f,m,h,b,w,y){n.$on("$ionicView.beforeEnter",function(){if(!f.get("user")||f.get("user")&&1!=f.get("user").status)return s.go("tab.user_login"),!1;e.hideTabs="tabs-item-hide";var t=(i.goodid,i.id);n.ENV=p,k=f.get("user").data.userid,P=f.get("user").data.random,b.set_order_info(t,k,P)}),n.images_list=[],n.imgurl=function(){var e={title:"选择图片上传方式？",buttonLabels:["拍照","图库"],addCancelButtonWithLabel:"取消",androidEnableCancelButton:!0,winphoneEnableCancelButton:!0};document.addEventListener("deviceready",function(){l.show(e).then(function(e){1==e?n.takePhoto():2==e&&n.addAttachment()})},!1)},n.addAttachment=function(){var e={maximumImagesCount:1,width:800,height:800,quality:80};_.getPictures(e).then(function(e){for(var t=0;t<e.length;t++)n.sybg_vm.img=e[t];y.set_upload(n.sybg_vm.img)},function(e){})},n.takePhoto=function(e){var t={destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA,targetWidth:600,targetHeight:600,quality:50};g.getPicture(t).then(function(e){n.sybg_vm.img=e,y.set_upload(n.sybg_vm.img)},function(e){})},n.$on("uploadFactory.set_upload",function(){c.show({noBackdrop:!0,template:"图片已成功上传",duration:2e3}),n.response=y.get_upload();var e=p.imgUrl;for(x in n.response)1==x&&(n.sybg_vm.img=e+n.response[x])});var v=i.goodid,$=i.id;n.ENV=p;var k=f.get("user").data.userid,P=f.get("user").data.random;w.set_trial_config(),n.$on("configFactory.set_trial_config",function(){var e=w.get_trial_config();n.seller_check_time=86400*e.data.seller_check_time,n.buyer_write_order_time=3600*e.data.buyer_write_order_time,n.buyer_write_talk_time=86400*e.data.buyer_write_talk_time,n.seller_trialtalk_check=86400*e.data.seller_trialtalk_check.value,n.seller_order_check_time=3600*e.data.seller_order_check_time,n.buyer_check_update_order_sn=3600*e.data.buyer_check_update_order_sn}),m.get_rebate_show(v),n.order_vm={mum:""},n.sybg_vm={pinfen:"",img:"img/shai_img.jpg",xinde:""},n.sybg_add=function(){if("img/shai_img.jpg"==n.sybg_vm.img)return c.show({noBackdrop:!0,template:"亲,请分享一张宝贝图片...",duration:1e3}),!1;if(""==n.sybg_vm.xinde)return c.show({noBackdrop:!0,template:"亲,请分享一些试用过程和经验...",duration:1e3}),!1;c.show({noBackdrop:!0,template:"亲,正在提交试用报告,请稍等...",duration:1e3});var e=n.sybg_vm.pinfen?n.sybg_vm.pinfen.id:3;b.set_trial_report($,e,n.sybg_vm.img,n.sybg_vm.xinde,k,P)},n.$on("trialOrderFactory.set_trial_report",function(){var e=b.get_trial_report();1==e.status?(c.show({noBackdrop:!0,template:e.msg,duration:1e3}),s.go("tab.trial_order")):c.show({noBackdrop:!0,template:e.msg,duration:1e3})}),n.pingfen=[{name:"★完全不满意,比较失望",id:1},{name:"★★非常不满意,只是感谢提供",id:3},{name:"★★★一般满意,还有待提高",id:3},{name:"★★★★比较满意,离完美差点",id:4},{name:"★★★★★完全满意,太喜欢这款",id:5}],n.$on("NewsContent.rebateshow",function(){if(n.txddh_showdata=m.getshow(),n.txddh_showloading=!1,"search"==n.txddh_showdata.type){var e=n.txddh_showdata.goods_rule.keyword,e=e.replace(/，/g,","),t=e.split(",");n.goods_keyword=t[Math.floor(Math.random()*t.length)]}}),n.$on("trialOrderFactory.set_order_info",function(){n.order_info=b.get_order_info()}),n.add_order_number=function(){d.show({title:"填写订单号",templateUrl:"a.html",scope:n,buttons:[{text:"取消"},{text:"确定",type:"button-assertive",onTap:function(e){var t=/^\d{9,20}$/;return t.test(n.order_vm.mum)?void b.set_fill_order_sn($,n.order_vm.mum,k,P):(e.preventDefault(),c.show({noBackdrop:!0,template:"亲,订单号是9位以上数字！",duration:1e3}),!1)}}]})},n.$on("trialOrderFactory.set_fill_order_sn",function(){var e=b.get_fill_order_sn();1==e.status?(c.show({noBackdrop:!0,template:e.msg,duration:1e3}),s.go("tab.trial_order")):c.show({noBackdrop:!0,template:e.msg,duration:1e3})}),n.To_order=function(e,t,r){function a(e){var t=/^((https?|ftp|news):\/\/)?([a-z]([a-z0-9\-]*[\.。])+([a-z]{2}|aero|arpa|biz|com|coop|edu|gov|info|int|jobs|mil|museum|name|nato|net|org|pro|travel)|(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))(\/[a-z0-9_\-\.~]+)*(\/([a-z0-9_\-\.]*)(\?[a-z0-9+_\-\.%=&]*)?)?(#[a-z][a-z0-9_]*)?$/i;return domain=e.match(t),domain=domain[1]+"m."+domain[4]+domain[5],null!=domain&&domain.length>0?domain:""}t=o("f_source")(t);var s=t+"下单";return"search"==e&&(s=t+"搜索下单",r=a(r)),"qrcode"==e?(c.show({noBackdrop:!0,template:"请扫描页面二维码下单",duration:2e3}),!1):void cordova.ThemeableBrowser.open(r,"_blank",{statusbar:{color:"#ffffffff"},toolbar:{height:44,color:"#f0f0f0ff"},title:{color:"#003264ff",staticText:s,showPageTitle:!0},backButton:{wwwImage:"img/back.png",wwwImagePressed:"img/back_pressed.png",align:"left",event:"backPressed"},closeButton:{wwwImage:"img/close.png",wwwImagePressed:"img/close_pressed.png",align:"right",event:"closePressed"},customButtons:[{wwwImage:"img/menu.png",wwwImagePressed:"img/menu.png",align:"right",event:"sharePressed"}],menu:{wwwImage:"img/menu2.png",wwwImagePressed:"img/menu2.png",title:"help",cancel:"Cancel",align:"right",event:"helloPressed"},backButtonCanClose:!0}).addEventListener("backPressed",function(e){}).addEventListener("sharePressed",function(t){"search"==e?alert("活动下单方式为：搜索下单\n搜索关键词："+n.goods_keyword+"\n 提示帮助："+n.txddh_showdata.goods_rule.keyword2+"\n请认准掌柜旺旺号："+n.txddh_showdata.goods_wangwang+"\n1.活动下单价："+n.txddh_showdata.goods_price+" 元\n2.活动完成：返还"+o("f_xiaoshu")(n.txddh_showdata.goods_bonus-1+1+(n.txddh_showdata.goods_price-1+1))+" 元\n3.下单完成之后，记得返回填写订单号\n 。"):alert("1.活动下单价："+n.txddh_showdata.goods_price+" 元\n2.活动完成：返还"+o("f_xiaoshu")(n.txddh_showdata.goods_bonus-1+1+(n.txddh_showdata.goods_price-1+1))+" 元\n3.下单完成之后，记得返回填写订单号。")}).addEventListener("helloPressed",function(e){var t=prompt("亲 请填写已付款下单的订单编号\n 您可在订单详情查看订单号\n对照订单号仔细输入\n如果输入错误,可在此修改\n提示：订单号一般为10位以上纯数字","");null!=t&&""!=t&&b.set_fill_order_sn($,t,k,P)}).addEventListener("sharePressed2",function(e){}).addEventListener(cordova.ThemeableBrowser.EVT_ERR,function(e){console.error(e.message)}).addEventListener(cordova.ThemeableBrowser.EVT_WRN,function(e){})},n.Appeal=function(e,t,o){return 4!=e?!1:void s.go("tab.order_appeal",{id:t,aid:o})},n.Order_log=function(){s.go("tab.order_log",{id:$})},n.$on("trialOrderFactory.set_getorderlists",function(){n.wdsy_showloading=!1,n.trial_getorderlists=b.get_getorderlists()})}]).controller("show_trial",["$rootScope","$scope","$ionicPopup","$state","$ionicLoading","$ionicModal","$stateParams","$filter","StorageFactory","UserProfileFactory","rebate_showFactory","configFactory","trialOrderFactory","ENV",function(e,t,o,r,a,n,s,i,d,u,c,l,_,g){var p=s.id;t.$on("$ionicView.beforeEnter",function(){e.hideTabs="tabs-item-hide",!d.get("user")||d.get("user")&&1!=d.get("user").status?(t.lnvolved_status=0,t.login_status=0):(userid=d.get("user").data.userid,random=d.get("user").data.random,t.Member_group=d.get("profile").groupid,t.allpay_status=d.get("profile").alipay_status,t.emall_status=d.get("profile").email_status,t.name_status=d.get("profile").name_status,t.phone_status=d.get("profile").phone_status,u.set_username_taobao(userid,random),_.set_order_is_join(p,userid,random),t.lnvolved_status=1,t.user_point=d.get("profile").point,t.login_status=1)}),t.fenxiang=function(){var e=t.showdata.title,o="[免费试用]"+t.showdata.title+"限量份数"+t.showdata.goods_number+"快来免费申请吧！",r=g.siteUrl+t.showdata.url,n=i("imgUrl")(t.showdata.thumb);window.plugins.Baidushare.bdshare(e,o,r,n,function(e){1==e&&a.show({noBackdrop:!0,template:"分享成功！",duration:1e3})},function(e){alert("encoding failed: "+e)})},t.ENV=g,t.Application_reasons="",t.sy_showloading=!0,t.Switch=1,t.data_time=Math.round((new Date).getTime()/1e3),t.$on("UserProfileFactory.set_username_taobao",function(){function e(){for(var e in o)1==o[e].is_default?t.data_bind_taobao_default=o[e]:t.data_bind_taobao_default=o[0]}t.data_bind_taobao=u.get_username_taobao();var o=t.data_bind_taobao.lists;e(),taobao_default_id=void 0==t.data_bind_taobao_default?"":t.data_bind_taobao_default.id});t.vm={};$(".i_tryout .s_part6 .part").bind("click",function(){$(".i_tryout .s_part6 .part").attr("class","part"),$(this).attr("class","part sel")}),l.set_trial_config(),c.get_rebate_show(p),t.goods_body=function(){t.Switch=1},t.good_user_list=function(){t.user_list_showloading=!0,t.Switch=2,c.set_good_user_list(p,1)},t.report_lists=function(){t.report_list_showloading=!0,t.Switch=3,c.set_trial_report_lists(p)},t.sybg_loadMore=function(){c.sybg_loadMore(p)},t.$on("configFactory.set_trial_config",function(){var e=l.get_trial_config();t.bind_alipay=e.data.buyer_join_condition.bind_alipay,t.bind_taobao=e.data.buyer_join_condition.bind_taobao,t.bind_email=e.data.buyer_join_condition.email,t.information=e.data.buyer_join_condition.information,t.reason=e.data.buyer_join_condition.reason,t.bind_phone=e.data.buyer_join_condition.phone,t.realname=e.data.buyer_join_condition.realname}),t.$on("NewsContent.rebateshow",function(){t.showdata=c.getshow(),t.sy_showloading=!1,console.log(t.showdata)}),t.$on("rebate_showFactory.set_good_user_list",function(){t.user_list=c.get_good_user_list(),t.user_list_showloading=!1,$(".hang1").each(function(){$(this).find("img").height()<$(this).find("img").width()&&$(this).find("img").css("height",$(this).find("img").width())})}),t.$on("rebate_showFactory.set_trial_report_lists",function(){t.report_list=c.get_trial_report_lists(),t.report_list_showloading=!1,t.sybg_hasNextPage=c.sybg_hasNextPage(),t.$broadcast("scroll.infiniteScrollComplete")}),t.$on("trialOrderFactory.set_order_is_join",function(){t.order_is_join=_.get_order_is_join()}),t.Apply_trial=function(){if(1!=t.login_status)return a.show({noBackdrop:!0,template:"亲，请先登录后再申请！",duration:1500}),r.go("tab.user_login"),!1;if(1!=t.showdata.status)return a.show({noBackdrop:!0,template:"亲，当前活动未开始或已结束！",duration:1500}),!1;if(0==t.lnvolved_status)return a.show({noBackdrop:!0,template:"亲，您已参与过本次活动,不能再次参与！",duration:1500}),!1;if(5==t.bind_alipay&&1!=t.allpay_status||3==t.realname&&1!=t.name_status||2==t.bind_email&&1!=t.emall_status||1==t.bind_phone&&1!=t.phone_status||4==t.bind_taobao&&t.data_bind_taobao.count<1){var e=o.alert({title:"参与条件",templateUrl:"a.html",scope:t});return e.then(function(e){}),!1}if(void 0!=t.showdata.type&&"ask"==t.showdata.type){var e=o.show({title:"请先回答商家问题",templateUrl:"c.html",scope:t,buttons:[{text:"取消"},{text:"OK",type:"button-assertive button-outline",onTap:function(e){return t.vm.Answer?t.vm.Answer!=t.showdata.goods_rule.ask.answer?(e.preventDefault(),a.show({noBackdrop:!0,template:"亲,答案错误,请仔细找找！",duration:1500}),!1):(a.show({noBackdrop:!0,template:"亲,回答正确！",duration:1e3}),void t.taobao_reason()):(e.preventDefault(),a.show({noBackdrop:!0,template:"亲，答案不能为空",duration:1500}),!1)}}]});return e.then(function(e){}),!1}t.taobao_reason()},t.vip_Apply_trial=function(){if(1!=t.showdata.goods_vipfree)return a.show({noBackdrop:!0,template:"当前商品不支持使用vip特权!",duration:2e3}),!1;if(2!=t.Member_group)return a.show({noBackdrop:!0,template:"亲，您还不是vip,无法享受vip特权!,加入vip,立享多项特权！",duration:2e3}),!1;if(4==t.bind_taobao&&t.data_bind_taobao.count<1)return a.show({noBackdrop:!0,template:"请先绑定淘宝帐号，才能使用vip特权！",duration:2e3}),r.go("tab.user_profile_taobao"),!1;if(4==t.bind_taobao&&t.data_bind_taobao.count>0){var e=o.confirm({title:"请选择要用的淘宝帐号",templateUrl:"e.html",cancelText:"放弃试用",okText:"确定试用",okType:"button-assertive button-outline",scope:t});return e.then(function(e){if(e){var o=void 0==t.vm.data_bind_taobao_default?taobao_default_id:t.vm.data_bind_taobao_default.id.id;return _.vip_apply_order(p,o,"",userid,random),!1}}),!1}_.vip_apply_order(p,"","",userid,random)},t.jinbi_Apply_trial=function(){if(0==t.showdata.goods_point)return a.show({noBackdrop:!0,template:"非常抱歉,本商品暂不支持积分兑换",duration:1500}),!1;if(t.user_point<t.showdata.point_num)return a.show({noBackdrop:!0,template:"非常抱歉,兑换本商品需要"+t.showdata.point_num+"积分,<br/>您目前拥有"+t.user_point+"积分<br/>多参加任务,每日签到,大转盘可获得更多积分！",duration:3e3}),!1;if(4==t.bind_taobao&&t.data_bind_taobao.count<1)return a.show({noBackdrop:!0,template:"请先绑定淘宝帐号，才能使用积分兑换！",duration:2e3}),r.go("tab.user_profile_taobao"),!1;if(4==t.bind_taobao&&t.data_bind_taobao.count>0){var e=o.confirm({title:"请选择要用的淘宝帐号",subTitle:"积分余额 "+t.user_point+" 本次兑换花费 "+t.showdata.point_num+" 积分",templateUrl:"e.html",cancelText:"放弃兑换",okText:"确定兑换",okType:"button-assertive button-outline",scope:t});return e.then(function(e){if(e){var o=void 0==t.vm.data_bind_taobao_default?taobao_default_id:t.vm.data_bind_taobao_default.id.id;return _.point_apply_order(p,o,"",userid,random),!1}}),!1}_.point_apply_order(p,"","",userid,random)},t.taobao_reason=function(){if(4==t.bind_taobao&&t.data_bind_taobao.count>0||7==t.reason){var e=o.alert({title:"选择帐号",templateUrl:"b.html",scope:t,okText:"提交申请",buttons:[{text:"放弃"},{text:"提交申请",type:"button-assertive",onTap:function(e){t.Submit_trial()}}]});return e.then(function(e){}),!1}t.Submit_trial()},t.Submit_trial=function(e){a.show({noBackdrop:!0,template:"亲，正在为您提交申请！",duration:1500});var o=void 0==t.vm.data_bind_taobao_default?taobao_default_id:t.vm.data_bind_taobao_default.id.id;o=4==t.bind_taobao?o:"",_.apply_order(p,o,e,userid,random)},t.$on("trialOrderFactory.apply_order",function(){var e=_.get_apply_order();return 0==e.status?(a.show({noBackdrop:!0,template:e.msg,duration:1500}),!1):void(1==e.status?(a.show({noBackdrop:!0,template:"试用申请成功,请等待商家审核，请随时留意app通知。",duration:1500}),t.order_is_join.data=0):a.show({noBackdrop:!0,template:"程序员哥哥，正在抢修",duration:1500}))}),t.$on("trialOrderFactory.vip_apply_order",function(){var e=_.get_vip_apply_order();return 0==e.status?(a.show({noBackdrop:!0,template:e.msg,duration:1500}),!1):1==e.status?(a.show({noBackdrop:!0,template:"恭喜您！成功使用vip特权试用本商品，赶快去下单吧！",duration:1500}),t.order_is_join.data=0,r.go("tab.trial_order_id",{id:e.data,goodid:p}),!1):void a.show({noBackdrop:!0,template:"程序员哥哥，正在抢修",duration:1500})}),t.$on("trialOrderFactory.point_apply_order",function(){var e=_.get_point_apply_order();return 0==e.status?(a.show({noBackdrop:!0,template:e.msg,duration:1500}),!1):1==e.status?(a.show({noBackdrop:!0,template:"恭喜您！成功使用"+t.showdata.goods_point+"积分兑换本商品试用特权，赶快去下单吧！",duration:1500}),t.order_is_join.data=0,r.go("tab.trial_order_id",{id:e.data,goodid:p}),!1):(a.show({noBackdrop:!0,template:"程序员哥哥，正在抢修",duration:1500}),!1)}),t.$on("$ionicView.loaded",function(){}),window.onerror=function(e,t,o){var r=t.lastIndexOf("/");return r>-1&&(t=t.substring(r+1)),alert("ERROR in "+t+" (line #"+o+"): "+e),!1}}]).controller("order_Appeal",["$scope","$state","$ionicLoading","$stateParams","$cordovaActionSheet","$cordovaImagePicker","$cordovaCamera","StorageFactory","UserProfileFactory","trialOrderFactory","uploadFactory","ENV",function(e,t,o,r,a,n,s,i,d,u,c,l){!i.get("user")||i.get("user")&&1!=i.get("user").status;var _=r.aid;e.order_id=r.id;var g=i.get("user").data.userid,p=i.get("user").data.random;e.appeal={type:"",buyer_cause:"",buyer_cause_img1:"img/pz1.jpg",buyer_cause_img2:"img/pz2.jpg",buyer_cause_img3:"img/pz3.jpg",buyer_phone:i.get("profile").phone,buyer_qq:0==i.get("profile").qq?"":i.get("profile").qq},e.set_appeal=function(){return e.appeal.type?"img/pz1.jpg"==e.appeal.buyer_cause_img1?(o.show({noBackdrop:!0,template:"请上传申诉凭证",duration:1500}),!1):""==e.appeal.buyer_cause?(o.show({noBackdrop:!0,template:"请填写申诉理由！",duration:1500}),!1):""==e.appeal.buyer_phone?(o.show({noBackdrop:!0,template:"请填写联系手机！",duration:1500}),!1):""==e.appeal.buyer_qq?(o.show({noBackdrop:!0,template:"请填写联系QQ！",duration:1500}),!1):void u.set_appeal_order(e.order_id,_,e.appeal.type,e.appeal.buyer_cause,e.appeal.buyer_cause_img1,e.appeal.buyer_cause_img2,e.appeal.buyer_cause_img3,e.appeal.buyer_phone,e.appeal.buyer_qq,g,p):(o.show({noBackdrop:!0,template:"请选择申诉类型 ",duration:1500}),!1)},e.$on("trialOrderFactory.set_appeal_order",function(){var e=u.get_appeal_order();1==e.status?(o.show({noBackdrop:!0,template:"申诉提交成功,我们会尽快联系商家处理...",duration:1500}),t.go("tab.user")):o.show({noBackdrop:!0,template:e.msg,duration:1500})}),e.imgurl=function(t){var o={title:"选择图片上传方式？",buttonLabels:["拍照","图库"],addCancelButtonWithLabel:"取消",androidEnableCancelButton:!0,winphoneEnableCancelButton:!0};document.addEventListener("deviceready",function(){a.show(o).then(function(o){1==o?e.takePhoto(t):2==o&&e.addAttachment(t)})},!1)},e.addAttachment=function(t){var r={maximumImagesCount:1,width:800,height:800,quality:80};n.getPictures(r).then(function(o){for(var r=0;r<o.length;r++)1==t&&(e.appeal.buyer_cause_img1=o[r]),2==t&&(e.appeal.buyer_cause_img2=o[r]),3==t&&(e.appeal.buyer_cause_img3=o[r]),c.set_upload(o[r],t)},function(e){o.show({noBackdrop:!0,template:"文件选择失败 请重试",duration:2e3})})},e.takePhoto=function(t){var r={destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA,targetWidth:600,targetHeight:600,quality:50};s.getPicture(r).then(function(o){1==t&&(e.appeal.buyer_cause_img1=o),2==t&&(e.appeal.buyer_cause_img2=o),3==t&&(e.appeal.buyer_cause_img3=o),c.set_upload(o,t)},function(e){o.show({noBackdrop:!0,template:"拍照失败 请重试",duration:2e3})})},e.$on("uploadFactory.set_upload",function(){o.show({noBackdrop:!0,template:"图片已成功上传",duration:2e3}),e.response=c.get_upload();var t=l.imgUrl;for(x in e.response)1==x&&(e.appeal.buyer_cause_img1=t+e.response[x]),2==x&&(e.appeal.buyer_cause_img2=t+e.response[x]),3==x&&(e.appeal.buyer_cause_img3=t+e.response[x])})}]).controller("Userorder_log",["$scope","$stateParams","$state","$ionicLoading","StorageFactory","UserProfileFactory","trialOrderFactory",function(e,t,o,r,a,n,s){if(!a.get("user")||a.get("user")&&1!=a.get("user").status)return o.go("tab.user_login"),!1;var i=a.get("user").data.userid,d=a.get("user").data.random,u=t.id;s.set_order_log(u,i,d),e.$on("trialOrderFactory.set_order_log",function(){e.data_order_log=s.get_order_log()})}]).controller("rebate_order",["$rootScope","$timeout","$scope","$state","$ionicPopup","$ionicModal","$ionicLoading","ENV","StorageFactory","UserProfileFactory","trialOrderFactory","configFactory",function(e,t,o,r,a,n,s,i,d,u,c,l){o.$on("$ionicView.beforeEnter",function(){if(e.hideTabs="tabs-item-hide",!d.get("user")||d.get("user")&&1!=d.get("user").status)o.userInfo="",o.logo_status=0;else{d.get("user").data.userid,d.get("user").data.random}}),o.ENV=i;var _=d.get("user").data.userid,g=d.get("user").data.random;c.set_getorderlists(_,"rebate",1,g),o.wdfl_showloading=!0;var p=1;o.wdsy_hasNextPage=!1,l.set_rebate_config(),o.$on("configFactory.set_rebate_config",function(){var e=l.get_rebate_config();o.buyer_write_order_time=60*e.data.buyer_write_order_time,o.seller_check_time=86400*e.data.seller_check_time,o.buyer_check_update_order_sn=3600*e.data.buyer_check_update_order_sn}),o.$on("trialOrderFactory.set_getorderlists",function(){o.wdfl_showloading=!1,o.trial_getorderlists=c.get_getorderlists(),o.wdsy_hasNextPage=c.get_wdsy_hasNextPage(),o.$broadcast("scroll.infiniteScrollComplete")}),o.add_order_number=function(e,t,o,a){if(1==o)return r.go("tab.rebate_show",{id:t}),!1;if(2==o||4==o||3==o)r.go("tab.rebate_order_id",{id:e,goodid:t});else if(7!=o||a){if(5==o)return s.show({noBackdrop:!0,template:"亲,请等待商家最终确认返款！",duration:1500}),!1;r.go("tab.rebate_show",{id:t})}else r.go("tab.rebate_The_sun",{id:e,goodid:t})},o.trial_order_changeTab=function(e,t){o.wdfl_showloading=!0,p=t,o.wdsy_showloading=!0,c.set_getorderlists(_,"rebate",p,g)},o.wdfl_doRefresh=function(){c.set_getorderlists(_,"rebate",p,g),o.$broadcast("scroll.refreshComplete")},o.wdfl_loadMore=function(){c.wdsy_loadMore(_,"rebate",p,g)},o.abandon_application=function(e){o.add_order_number=function(){return!1},a.confirm({title:"放弃申请",template:"一旦放弃申请,则不可再申请该试用商品,您确定要放弃申请？",cancelText:"取消",cancelType:"",okText:"确定",okType:"button-assertive button-outline"}).then(function(t){0==t?o.add_order_number=function(e,t,o){return 1==o?(r.go("tab.show_trial",{id:t}),!1):void(2==o||4==o?r.go("tab.trial_order_id",{id:e,goodid:t}):8==o?r.go("tab.trial_order_report",{id:e,goodid:t}):r.go("tab.trial_order_id",{id:e,goodid:t}))}:c.set_close_order_sn(e,_,g)})},$(".bar-subheader .button").bind("click",function(){$(".bar-subheader .button").attr("class","button button-clear"),$(this).attr("class","button button-clear sub_button_select")})}]).controller("rebate_show",["$rootScope","$scope","$ionicPopup","$state","$ionicLoading","$ionicModal","$stateParams","$filter","StorageFactory","UserProfileFactory","rebate_showFactory","configFactory","trialOrderFactory","ENV",function(e,t,o,r,a,n,s,i,d,u,c,l,_,g){var p=s.id;c.get_rebate_show(p),t.$on("$ionicView.beforeEnter",function(){e.hideTabs="tabs-item-hide",!d.get("user")||d.get("user")&&1!=d.get("user").status?(t.lnvolved_status=0,t.login_status=0):(userid=d.get("user").data.userid,random=d.get("user").data.random,t.allpay_status=d.get("profile").alipay_status,t.emall_status=d.get("profile").email_status,t.name_status=d.get("profile").name_status,t.phone_status=d.get("profile").phone_status,u.set_username_taobao(userid,random),_.set_order_is_join(p,userid,random),t.lnvolved_status=1,t.login_status=1)}),t.fenxiang=function(){var e=t.showdata.title,o="[超级返利]"+t.showdata.title+"限量份数"+t.showdata.goods_number+"快来免费申请吧！",r=g.siteUrl+t.showdata.url,n=i("imgUrl")(t.showdata.thumb);window.plugins.Baidushare.bdshare(e,o,r,n,function(e){1==e&&a.show({noBackdrop:!0,
template:"分享成功！",duration:1e3})},function(e){alert("encoding failed: "+e)})},t.Application_reasons="",t.Switch=1,t.fl_showloading=!0,t.data_time=Math.round((new Date).getTime()/1e3),t.good_user_list=function(){t.user_list_showloading=!0,t.Switch=2,c.set_good_user_list(p,1)},t.rebate_shai_lists=function(){t.Switch=3,t.mjsd_showloading=!0,c.set_shai_report_lists(p)},t.goods_body=function(){t.Switch=1};t.vm={};l.set_rebate_config(),t.$on("configFactory.set_rebate_config",function(){var e=l.get_rebate_config();t.bind_alipay=e.data.buyer_join_condition.bind_alipay,t.bind_taobao=e.data.buyer_join_condition.bind_taobao,t.bind_email=e.data.buyer_join_condition.email,t.information=e.data.buyer_join_condition.information,t.bind_phone=e.data.buyer_join_condition.phone,t.realname=e.data.buyer_join_condition.realname}),t.$on("trialOrderFactory.set_order_is_join",function(){t.order_is_join=_.get_order_is_join()}),$(document).on("click",".i_rebateDetail .s_part6 .part",function(){$(".i_rebateDetail .s_part6 .part").attr("class","part"),$(this).attr("class","part sel")}),t.$on("NewsContent.rebateshow",function(){t.showdata=c.getshow(),t.fl_showloading=!1}),t.$on("rebate_showFactory.set_shai_report_lists",function(){t.shai_lists=c.get_shai_report_lists(),t.mjsd_showloading=!1}),t.$on("rebate_showFactory.set_good_user_list",function(){t.user_list=c.get_good_user_list(),t.user_list_showloading=!1}),t.Panic_buying=function(){if(1!=t.login_status)return a.show({noBackdrop:!0,template:"亲，请先登录后再申请！",duration:1500}),r.go("tab.user_login"),!1;if(1!=t.showdata.status)return a.show({noBackdrop:!0,template:"亲，当前活动未开始或已结束！",duration:1500}),!1;if(0==t.lnvolved_status)return a.show({noBackdrop:!0,template:"亲，您已参与过本次活动,不能再次参与！",duration:1500}),!1;if(5==t.bind_alipay&&1!=t.allpay_status||3==t.realname&&1!=t.name_status||2==t.bind_email&&1!=t.emall_status||1==t.bind_phone&&1!=t.phone_status){var e=o.alert({title:"参与条件",templateUrl:"a.html",scope:t});return e.then(function(e){}),!1}if(void 0!=t.showdata.type&&"ask"==t.showdata.type){var e=o.show({title:"请先回答商家问题",templateUrl:"c.html",scope:t,buttons:[{text:"取消"},{text:"OK",type:"button-assertive",onTap:function(e){return t.vm.Answer?t.vm.Answer!=t.showdata.goods_rule.ask.answer?(e.preventDefault(),a.show({noBackdrop:!0,template:"亲,答案错误,请仔细找找！",duration:1500}),!1):(a.show({noBackdrop:!0,template:"亲,回答正确！",duration:1e3}),void t.Submit_rebate()):(e.preventDefault(),a.show({noBackdrop:!0,template:"亲，答案不能为空",duration:1500}),!1)}}]});return e.then(function(e){}),!1}t.Submit_rebate()},t.Submit_rebate=function(e){a.show({noBackdrop:!0,template:"亲，正在为您提交申请！",duration:1500}),_.set_apply_rebate_order(p,userid,random)},t.$on("trialOrderFactory.set_apply_rebate_order",function(){var e=_.get_apply_rebate();return 0==e.status?(a.show({noBackdrop:!0,template:e.msg,duration:1500}),!1):void(1==e.status?(a.show({noBackdrop:!0,template:"恭喜您!抢购成功, 请在指定时间内按照活动要求下单！",duration:3e3}),r.go("tab.rebate_order_id",{id:e.data,goodid:p})):a.show({noBackdrop:!0,template:"程序员哥哥，正在抢修",duration:1500}))})}]).controller("rebate_order_add",["$rootScope","$interval","$filter","$location","$scope","$state","$cordovaActionSheet","$cordovaImagePicker","$cordovaFileTransfer","$cordovaCamera","$stateParams","$ionicPopup","$ionicModal","$ionicLoading","ENV","StorageFactory","rebate_showFactory","UserProfileFactory","trialOrderFactory","configFactory","uploadFactory","ENV",function(e,t,o,r,a,n,s,i,d,u,c,l,_,g,p,f,m,h,b,w,y,p){a.$on("$ionicView.beforeEnter",function(){return!f.get("user")||f.get("user")&&1!=f.get("user").status?(n.go("tab.user_login"),!1):(e.hideTabs="tabs-item-hide",v=c.goodid,$=c.id,userid=f.get("user").data.userid,random=f.get("user").data.random,void b.set_order_info($,userid,random))});var v=c.goodid,$=c.id;m.get_rebate_show(v),a.ENV=p,a.txddh_showloading=!0,w.set_rebate_config(),a.$on("configFactory.set_rebate_config",function(){var e=w.get_rebate_config();a.buyer_write_order_time=60*e.data.buyer_write_order_time,a.seller_check_time=86400*e.data.seller_check_time,a.buyer_check_update_order_sn=3600*e.data.buyer_check_update_order_sn}),a.order_vm={mum:""},a.sybg_vm={pinfen:"",img:"img/shai_img.jpg",xinde:""},a.The_sun=function(){return"img/shai_img.jpg"==a.sybg_vm.img?(g.show({noBackdrop:!0,template:"亲,请分享一下宝贝图片...",duration:1e3}),!1):""==a.sybg_vm.xinde?(g.show({noBackdrop:!0,template:"亲,请分享一下购物心得...",duration:1e3}),!1):(g.show({noBackdrop:!0,template:"亲,正在提交...",duration:1e3}),void b.set_shai_report($,a.sybg_vm.img,a.sybg_vm.xinde,userid,random))},a.$on("trialOrderFactory.set_shai_report",function(){var e=b.get_shai_report();return 1==e.status?(g.show({noBackdrop:!0,template:e.msg,duration:1e3}),n.go("tab.rebate_order"),!1):void g.show({noBackdrop:!0,template:e.msg,duration:1e3})}),a.pingfen=[{name:"★完全不满意,比较失望",id:1},{name:"★★非常不满意,只是感谢提供",id:3},{name:"★★★一般满意,还有待提高",id:3},{name:"★★★★比较满意,离完美差点",id:4},{name:"★★★★★完全满意,太喜欢这款",id:5}],a.$on("NewsContent.rebateshow",function(){if(a.txddh_showdata=m.getshow(),a.txddh_showloading=!1,"search"==a.txddh_showdata.type){var e=a.txddh_showdata.goods_rule.keyword,e=e.replace(/，/g,","),t=e.split(",");a.goods_keyword=t[Math.floor(Math.random()*t.length)]}}),a.$on("trialOrderFactory.set_order_info",function(){a.order_info=b.get_order_info()}),a.add_order_number=function(){l.show({title:"填写订单号",templateUrl:"a.html",scope:a,buttons:[{text:"取消"},{text:"确定",type:"button-assertive",onTap:function(e){var t=/^\d{9,20}$/;return t.test(a.order_vm.mum)?void b.set_fill_order_sn($,a.order_vm.mum,userid,random):(e.preventDefault(),g.show({noBackdrop:!0,template:"亲,订单号是9位以上数字！",duration:1e3}),!1)}}]})},a.$on("trialOrderFactory.set_fill_order_sn",function(){var e=b.get_fill_order_sn();1==e.status?(g.show({noBackdrop:!0,template:e.msg,duration:1e3}),n.go("tab.rebate_order")):g.show({noBackdrop:!0,template:e.msg,duration:1e3})}),a.To_order=function(e,t,r){function n(e){var t=/^((https?|ftp|news):\/\/)?([a-z]([a-z0-9\-]*[\.。])+([a-z]{2}|aero|arpa|biz|com|coop|edu|gov|info|int|jobs|mil|museum|name|nato|net|org|pro|travel)|(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))(\/[a-z0-9_\-\.~]+)*(\/([a-z0-9_\-\.]*)(\?[a-z0-9+_\-\.%=&]*)?)?(#[a-z][a-z0-9_]*)?$/i;return domain=e.match(t),domain=domain[1]+"m."+domain[4]+domain[5],null!=domain&&domain.length>0?domain:""}t=o("f_source")(t);var s=t+"下单";return"search"==e&&(s=t+"搜索下单",r=n(r)),"qrcode"==e?(g.show({noBackdrop:!0,template:"请扫描页面二维码下单",duration:2e3}),!1):void cordova.ThemeableBrowser.open(r,"_blank",{statusbar:{color:"#ffffffff"},toolbar:{height:44,color:"#f0f0f0ff"},title:{color:"#003264ff",staticText:s,showPageTitle:!0},backButton:{wwwImage:"img/back.png",wwwImagePressed:"img/back_pressed.png",align:"left",event:"backPressed"},closeButton:{wwwImage:"img/close.png",wwwImagePressed:"img/close_pressed.png",align:"right",event:"closePressed"},customButtons:[{wwwImage:"img/menu.png",wwwImagePressed:"img/menu.png",align:"right",event:"sharePressed"}],menu:{wwwImage:"img/menu2.png",wwwImagePressed:"img/menu2.png",title:"help",cancel:"Cancel",align:"right",event:"helloPressed"},backButtonCanClose:!0}).addEventListener("backPressed",function(e){}).addEventListener("sharePressed",function(t){"search"==e?alert("活动下单方式为：搜索下单\n搜索关键词："+a.goods_keyword+"\n 提示帮助："+a.txddh_showdata.goods_rule.keyword2+"\n1.活动下单价："+a.txddh_showdata.goods_price+" 元\n2.折扣 "+a.txddh_showdata.goods_discount+" 折\n3.活动完成：返还"+o("f_xiaoshu")(a.txddh_showdata.goods_price-a.txddh_showdata.goods_price*a.txddh_showdata.goods_discount/10)+" 元\n4.下单完成之后，记得返回填写订单号。"):alert("1.活动下单价："+a.txddh_showdata.goods_price+" 元\n2.折扣 "+a.txddh_showdata.goods_discount+" 折\n3.活动完成：返还"+o("f_xiaoshu")(a.txddh_showdata.goods_price-a.txddh_showdata.goods_price*a.txddh_showdata.goods_discount/10)+" 元\n4.下单完成之后，记得返回填写订单号。")}).addEventListener("helloPressed",function(e){var t=prompt("亲 请填写已付款下单的订单编号\n 您可在订单详情查看订单号\n对照订单号仔细输入\n如果输入错误,可在此修改\n提示：订单号一般为10位以上纯数字","");null!=t&&""!=t&&b.set_fill_order_sn($,t,userid,random)}).addEventListener("sharePressed2",function(e){}).addEventListener(cordova.ThemeableBrowser.EVT_ERR,function(e){console.error(e.message)}).addEventListener(cordova.ThemeableBrowser.EVT_WRN,function(e){})},a.Appeal=function(e,t,o){return 4!=e?!1:void n.go("tab.order_appeal",{id:t,aid:o})},a.Order_log=function(){n.go("tab.order_log",{id:$})},a.imgurl1=function(e){var t={title:"选择图片上传方式？",buttonLabels:["拍照","图库"],addCancelButtonWithLabel:"取消",androidEnableCancelButton:!0,winphoneEnableCancelButton:!0};document.addEventListener("deviceready",function(){s.show(t).then(function(t){1==t?a.takePhoto(e):2==t&&a.addAttachment(e)})},!1)},a.addAttachment=function(e){var t={maximumImagesCount:1,width:800,height:800,quality:80};i.getPictures(t).then(function(e){for(var t=0;t<e.length;t++)a.sybg_vm.img=e[t];y.set_upload(a.sybg_vm.img)},function(e){g.show({noBackdrop:!0,template:"文件选择失败 请重试",duration:2e3})})},a.takePhoto=function(e){var t={destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA,targetWidth:600,targetHeight:600,quality:50};u.getPicture(t).then(function(e){a.sybg_vm.img=e,y.set_upload(a.sybg_vm.img)},function(e){g.show({noBackdrop:!0,template:"拍照失败 请重试",duration:2e3})})},a.$on("uploadFactory.set_upload",function(){g.show({noBackdrop:!0,template:"图片已成功上传",duration:2e3}),a.response=y.get_upload();var e=p.imgUrl;a.sybg_vm.img=e+a.response[1]}),window.onerror=function(e,t,o){var r=t.lastIndexOf("/");return r>-1&&(t=t.substring(r+1)),alert("ERROR in "+t+" (line #"+o+"): "+e),!1},a.$on("trialOrderFactory.set_getorderlists",function(){a.wdsy_showloading=!1,a.trial_getorderlists=b.get_getorderlists()})}]).controller("task_order",["$scope","$state","$ionicModal","$ionicLoading","StorageFactory","TaskFactory",function(e,t,o,r,a,n){if(!a.get("user")||a.get("user")&&1!=a.get("user").status)return t.go("tab.user_login"),!1;var s=a.get("user").data.userid,i=a.get("user").data.random;e.task_showloading=!0,n.set_user_borke(s,i),e.$on("TaskFactory.set_user_borke",function(){e.data_user_borke=n.get_user_borke(),e.task_showloading=!1})}]).controller("task_list",["$rootScope","$scope","$state","$ionicModal","$ionicLoading","StorageFactory","UserProfileFactory","configFactory","TaskFactory",function(e,t,o,r,a,n,s,i,d){if(!n.get("user")||n.get("user")&&1!=n.get("user").status);else{n.get("user").data.userid,n.get("user").data.random}t.$on("UserDepositeFactory.set_getusercashlog",function(){t.answer_task_data=i.get_answer_task()}),t.$on("TaskFactory.set_user_borke",function(){t.data_user_borke=d.get_user_borke()}),t.task_hasNextPage=!1;var u="id";d.set_broke_list(u),t.$on("TaskFactory.set_broke_list",function(){t.broke_list=d.get_broke_list(),t.task_showloading=!1,t.$broadcast("scroll.infiniteScrollComplete"),t.task_hasNextPage=d.task_hasNextPage()}),t.$on("$ionicView.beforeEnter",function(){e.hideTabs="tabs-item-hide"}),t.task_hasNextPage=function(){return d.task_hasNextPage()},t.task_doRefresh=function(){d.set_broke_list(u),t.$broadcast("scroll.refreshComplete")},t.task_loadMore=function(){d.task_loadMore(u)},t.task_changeTab=function(e){u=e,t.task_showloading=!0,d.set_broke_list(u)},$(".s_ti a").bind("click",function(){$(".s_ti a").attr("class",""),$(this).attr("class","sel")})}]).controller("task_show",["$rootScope","$scope","$stateParams","$state","$ionicModal","$filter","$ionicLoading","StorageFactory","TaskFactory","UserProfileFactory","configFactory","trialOrderFactory","ENV",function(e,t,o,r,a,n,s,i,d,u,c,l,_){var g=o.id;if(t.$on("$ionicView.beforeEnter",function(){e.hideTabs="tabs-item-hide"}),t.task_show_hasNextPage=!0,!i.get("user")||i.get("user")&&1!=i.get("user").status)t.login_status=0;else{var p=i.get("user").data.userid,f=i.get("user").data.random;l.set_is_join_borke(g,p,f),t.login_status=1,t.phone_status=i.get("profile").phone_status}d.set_broke_show(g),c.set_answer_task(),t.$on("UserDepositeFactory.set_getusercashlog",function(){t.answer_task_data=c.get_answer_task()}),t.$on("TaskFactory.set_broke_show",function(){t.task_show=d.get_broke_show(),console.log(t.task_show),t.task_show_hasNextPage=!1}),t.$on("trialOrderFactory.set_is_join_borke",function(){t.is_join_borke=l.get_is_join_borke()}),t.$on("trialOrderFactory.set_answer_task",function(){return t.data_answer_task=l.get_answer_task(),0==t.data_answer_task.status?(s.show({noBackdrop:!0,template:t.data_answer_task.msg,duration:2e3}),!1):void(1==t.data_answer_task.status&&(s.show({noBackdrop:!0,template:"恭喜您,回答正确,获得本次任务现金奖励"+t.task_show.goods_price+"元，奖励已实时发送至您账户当中！",duration:2e3}),t.is_join_borke.data=1))}),t.fenxiang=function(){var e="[回答就有钱]"+t.task_show.title,o="[做任务赚钱]"+t.task_show.title+"快来参与吧！",r=_.siteUrl+"/broke/",a=n("imgUrl")(t.task_show.thumb);window.plugins.Baidushare.bdshare(e,o,r,a,function(e){1==e&&s.show({noBackdrop:!0,template:"分享成功！",duration:1e3})},function(e){alert("encoding failed: "+e)})},t.add_daan=function(e){return 1!=t.login_status?(s.show({noBackdrop:!0,template:"请先登录后,在申请",duration:2e3}),!1):1==t.is_join_borke.data?(s.show({noBackdrop:!0,template:"亲，您已参与过一次了,请把机会留给其它人！",duration:2e3}),t.is_join_borke.data=1,!1):e?void l.set_answer_task(g,e,p,f):(s.show({noBackdrop:!0,template:"亲,请填写答案,答案不能为空！",duration:2e3}),!1)},t.zhao_daan=function(e){if(1==e)window.location.href="http://m.taobao.com";else if(2==e)window.location.href="http://m.tmall.com";else{if(3!=e)return s.show({noBackdrop:!0,template:"请按照搜索要求下单",duration:2e3}),!1;window.location.href="http://m.jd.com"}}}]).controller("integral_list",["$rootScope","$scope","$ionicLoading","StorageFactory","integralFactory",function(e,t,o,r,a){t.$on("$ionicView.beforeEnter",function(){e.hideTabs="tabs-item-hide"}),t.shop_list_showloading=!0,a.set_shop_lists(),t.shop_doRefresh=function(){a.set_shop_lists(),t.$broadcast("scroll.refreshComplete")},t.$on("integralFactory.set_shop_lists",function(){t.shop_list=a.get_shop_list(),t.$broadcast("scroll.infiniteScrollComplete"),t.shop_hasNextPage=a.shop_hasNextPage(),t.shop_list_showloading=!1}),t.shop_loadMore=function(){a.shop_loadMore()},window.onerror=function(e,t,o){var r=t.lastIndexOf("/");return r>-1&&(t=t.substring(r+1)),alert("ERROR in "+t+" (line #"+o+"): "+e),!1}}]).controller("integral_show",["$rootScope","$scope","$ionicPopup","$state","$stateParams","$ionicLoading","trialOrderFactory","StorageFactory","integralFactory","UserProfileFactory","UserPersonalFactory",function(e,t,o,r,a,n,s,i,d,u,c){t.$on("$ionicView.beforeEnter",function(){e.hideTabs="tabs-item-hide"});var l=a.id;if(t.shop_show_showloading=!0,!i.get("user")||i.get("user")&&1!=i.get("user").status)t.login_status=0;else{var _=i.get("user").data.userid,g=i.get("user").data.random;s.set_shop_exchange(l,_,g),t.user_point=i.get("profile").point,u.set_username_Profile_address(_,g),t.user_phone=i.get("profile").phone,t.login_status=1}$(".i_PointsDetail .s_part6 .R span").live("click",function(){$(".i_PointsDetail .s_part6 .R span").attr("class",""),$(this).attr("class","sel")}),t.spec=function(e){shop_spec=e},t.getTime=Math.round((new Date).getTime()/1e3),d.set_shop_show(l),t.$on("integralFactory.set_shop_show",function(){t.shop_show=d.get_shop_show();var e=t.shop_show.spec,e=e.replace(/，/g,","),e=e.replace(/ /g,",");t.keyword_obj2=e.split(","),t.shop_show_showloading=!1,shop_spec=t.keyword_obj2[0]}),t.$on("trialOrderFactory.set_shop_exchange",function(){t.is_join_shop=s.get_is_join_borke()}),t.$on("UserProfileFactory.set_username_Profile_address",function(){var e=u.get_username_Profile_address();t.data_address=e.data;var o=e.data;console.log(e),t.provice_id=o.provice,t.city_id=o.area,console.log(t.provice_id)}),t.user_order_jifen=function(){return 1!=t.logo_status?(r.go("tab.user_login"),!1):void r.go("tab.user_jifen_order")},t.showConfirm=function(){},t.Exchange=function(){if(1!=t.login_status)return n.show({noBackdrop:!0,template:"亲,您还未登录,请先登录后再兑换",duration:2e3}),r.go("tab.user_login"),!1;if(1==t.is_join_shop.data)return n.show({noBackdrop:!0,template:"亲,您已经兑换过本商品,同一商品只能兑换一次！",duration:2e3}),!1;if(t.user_point<t.shop_show.point-0)return n.show({noBackdrop:!0,template:"亲,您的积分不足，目前账户剩余积分 "+t.user_point+"兑换所需积分 "+t.shop_show.point+" 多参与积分任务,每日签到可获得更多积分！",duration:2e3}),!1;if(""==t.provice_id||null==t.provice_id)return n.show({noBackdrop:!0,template:"亲, 请先完善收货地址，方便收货",duration:2e3}),r.go("tab.user_profile_address"),!1;if(""==t.user_phone)return n.show({noBackdrop:!0,template:"亲, 请先进行手机认证之后才能兑换",duration:2e3}),r.go("tab.user_profile_phone"),!1;var e=o.confirm({title:"积分兑换确认",template:'您确定花费 <b class="cc" >'+t.shop_show.point+" 积分</b>?<br/> ,兑换本商品,<br/>账户目前积分余额 <b class='cc' >"+t.user_point+" </b>积分",cancelText:"放弃兑换",cancelType:"",okText:"确定兑换",okType:"button-assertive button-outline"});e.then(function(e){e&&s.set_exchange(l,shop_spec,_,g)})},t.$on("trialOrderFactory.set_exchange",function(){return t.exchange_data=s.get_exchange(),1!=t.exchange_data.status?0==t.exchange_data.status?(n.show({noBackdrop:!0,template:t.exchange_data.msg,duration:2e3}),!1):(n.show({noBackdrop:!0,template:"程序员哥哥正在维护",duration:2e3}),!1):(n.show({noBackdrop:!0,template:"恭喜您,花费积分 "+t.shop_show.point+"成功兑换了喜欢的商品",duration:2e3}),t.is_join_shop.data=1,c.set_userinfo(_,g),t.user_point=t.user_point-t.shop_show.point,void 0)}),t.$on("UserPersonal.set_userinfo",function(){t.userInfo=c.get_userinfo(),1==t.userInfo.status&&i.set("profile",t.userInfo)})}]).controller("jifen_order",["$scope","$state","$ionicModal","$ionicLoading","StorageFactory","TaskFactory","trialOrderFactory",function(e,t,o,r,a,n,s){if(!a.get("user")||a.get("user")&&1!=a.get("user").status)return t.go("tab.user_login"),!1;var i=a.get("user").data.userid,d=a.get("user").data.random;e.shop_log_showloading=!0,s.set_shop_log(i,d,0),e.$on("trialOrderFactory.set_shop_log",function(){e.shop_log=s.get_shop_log(),e.shop_log_showloading=!1}),e.jifen_order_changeTab=function(t){e.shop_log_showloading=!0,s.set_shop_log(i,d,t)},$(".bar-subheader .button").bind("click",function(){$(".bar-subheader .button").attr("class","button button-clear"),$(this).attr("class","button button-clear sub_button_select")})}]).controller("invitation",["$rootScope","$scope","$state","$ionicLoading","StorageFactory","configFactory","UserProfileFactory","invitationFactory","ENV",function(e,t,o,r,a,n,s,i,d){t.$on("$ionicView.beforeEnter",function(){e.hideTabs="tabs-item-hide",!a.get("user")||a.get("user")&&1!=a.get("user").status?t.login_status=0:(userid=a.get("user").data.userid,random=a.get("user").data.random,t.login_status=1,i.set_recommend_total_moeny(userid,random))}),t.fenxiang=function(){var e="好友强力推荐 快来看",t="哈，发现一个免费试用商品的网站，还能赚红包，我已经申请了好多东西，真的很不错哦。快去看看吧！",o=d.siteUrl+"/index.php?m=friends&c=index&a=index&userid="+userid,a=d.siteUrl+"/uploadfile/apk/logo.png";console.log(e,t,o,a),window.plugins.Baidushare.bdshare(e,t,o,a,function(e){1==e&&r.show({noBackdrop:!0,template:"分享成功！",duration:1e3})},function(e){alert("encoding failed: "+e)})},i.set_order_by_friend(),n.set_friends_config(),t.$on("configFactory.set_friends_config",function(){t.config_data=n.get_friends_config()}),t.$on("invitationFactory.set_recommend_total_moeny",function(){var e=i.get_recommend_total_moeny();t.total_moeny=e.data[0].num?e.data[0].num:0}),t.set_invitation_log=function(){return 0==t.login_status?(o.go("tab.user_login"),!1):(o.go("tab.invitation_log"),t.invitation_log_showloading=!0,void i.set_recommend_friend(userid,random))},t.$on("invitationFactory.set_recommend_friend",function(){t.recommend_friend=i.get_recommend_friend(),t.invitation_log_showloading=!1}),t.$on("invitationFactory.set_order_by_friend",function(){t.user_paihang=i.get_order_by_friend()})}]).controller("duo",["$rootScope","$scope","ENV",function(e,t,o){t.$on("$ionicView.beforeEnter",function(){e.hideTabs=""}),t.fenxiang=function(){var e="免费拿商品 不花钱 ",t="每天10点更新，数百种商品免费试用，不用花钱就能拿到自己喜欢的商品.",r=o.siteUrl,a=o.siteUrl+"/uploadfile/apk/logo.png";window.plugins.Baidushare.bdshare(e,t,r,a,function(e){1==e&&$ionicLoading.show({noBackdrop:!0,template:"分享成功！",duration:1e3})},function(e){alert("encoding failed: "+e)})}}]).controller("help",["$rootScope","$scope",function(e,t){t.$on("$ionicView.beforeEnter",function(){e.hideTabs="tabs-item-hide"})}]).controller("jiang",["$rootScope","$state","$timeout","$ionicPopup","$interval","$scope","configFactory","jiangFactory","StorageFactory",function(e,t,o,r,a,n,s,i,d){n.$on("$ionicView.beforeEnter",function(){e.hideTabs="tabs-item-hide",!d.get("user")||d.get("user")&&1!=d.get("user").status?n.login_status=0:(userid=d.get("user").data.userid,random=d.get("user").data.random,i.set_user_reward_cishu(userid,random),n.login_status=1)}),n.$on("$ionicView.beforeEnter",function(){e.hideTabs="tabs-item-hide"}),n.$on("jiangFactory.set_reward_list",function(){n.reward_list=i.get_reward_list()}),s.set_reward_config(),n.$on("configFactory.set_reward_config",function(){n.reward_config=s.get_reward_config()}),n.$on("jiangFactory.set_user_reward_cishu",function(){n.reward_cishu=i.get_user_reward_cishu()}),i.set_reward_list(),n.$on("jiangFactory.set_reward_list",function(){n.reward_list=i.get_reward_list()}),n.$on("jiangFactory.set_user_reward_list",function(){n.user_reward_list=i.get_user_reward_list(),n.jiang_log_showloading=!1}),n.User_user_reward=function(){return!d.get("user")||d.get("user")&&1!=d.get("user").status?(t.go("tab.user_login"),!1):(t.go("tab.jiang_log"),n.jiang_log_showloading=!0,void i.set_user_reward_list(userid,random))},n.cishu=5,n.rank1="现金100元";var u=0,c=0;n.rotate=function(e){e=e?e:0,c+=5,1==e&&c%360>0&&30>c%360&&(c=5,$("#rotate").attr("style","transform: rotate(1deg)")),2==e&&c%360>30&&90>c%360&&(c=60),3==e&&c%360>90&&150>c%360&&(c=120),4==e&&c%360>150&&210>c%360&&(c=180),5==e&&c%360>210&&270>c%360&&(c=240),6==e&&c%360>270&&330>c%360&&(c=300),element=document.getElementById("rotate"),element.style.MozTransform="rotate("+c+"deg)",element.style.webkitTransform="rotate("+c+"deg)",element.style.msTransform="rotate("+c+"deg)",element.style.OTransform="rotate("+c+"deg)",element.style.transform="rotate("+c+"deg)"},n.rotate_stop=function(){u=1,setTimeout(n.alert_sring_fun(),500)},n.alert_sring_fun=function(e){var t;if(!e){t="今日抽奖机会已请明日再来！";var o=r.confirm({title:"中奖结果",template:t});return o.then(function(e){}),!1}1==e.rank&&(t="恭喜您获得一等奖"),2==e.rank&&(t="恭喜您获得二等奖"),3==e.rank&&(t="恭喜您获得三等奖"),4==e.rank&&(t="恭喜您获得四等奖"),5==e.rank&&(t="恭喜您获得五等奖"),6==e.rank&&(t="恭喜您获得六等奖");var o=r.confirm({title:"中奖结果",okText:"确定",okType:"button-assertive button-outlin button-clear",cancelText:"取消",cancelType:"button-assertive button-outlin button-clear",template:t+"奖励 "+e.result});o.then(function(e){}),l=0};var l=0;n.ajax=function(){return 0==n.login_status?(t.go("tab.user_login"),!1):0!=l?!1:n.reward_cishu<1?!1:(l=1,n.interval1=a(function(){n.rotate(0)},10),void i.set_lottery(userid,random))},n.$on("jiangFactory.set_lottery",function(){n.data_lottery=i.get_lottery(),i.set_user_reward_cishu(userid,random),o(function(){a.cancel(n.interval1),1==n.data_lottery.rank&&$("#rotate").attr("style","transform: rotate(1deg)"),2==n.data_lottery.rank&&$("#rotate").attr("style","transform: rotate(780deg)"),3==n.data_lottery.rank&&$("#rotate").attr("style","transform: rotate(840deg)"),4==n.data_lottery.rank&&$("#rotate").attr("style","transform: rotate(900deg)"),5==n.data_lottery.rank&&$("#rotate").attr("style","transform: rotate(960deg)"),6==n.data_lottery.rank&&$("#rotate").attr("style","transform: rotate(1020deg)"),n.alert_sring_fun(n.data_lottery)},2e3)})}]).controller("commission_list",["$rootScope","$scope","ENV","$timeout","$ionicPopover","categorylistsFactory","commissionFactory","$stateParams","$ionicSideMenuDelegate",function(e,t,o,r,a,n,s,i,d){t.ENV=o,t.$on("$ionicView.beforeEnter",function(){e.hideTabs="tabs-item-hide"}),t.showloading=!0,t.commission_hasNextPage=!1,t.hide=function(){$ionicLoading.hide()},s.getTopTopics(),t.$on("commissionFactory.getTopTopics",function(){t.goods=s.getArticles(),t.showloading=!1,t.commission_hasNextPage=s.hasNextPage(),t.$broadcast("scroll.infiniteScrollComplete")}),t.doRefresh=function(){s.getTopTopics(),t.$broadcast("scroll.refreshComplete")},t.loadMore=function(){s.getMoreTopics()}}]).controller("commission_show",["$rootScope","$scope","$ionicPopup","$state","$ionicLoading","$ionicModal","$filter","$stateParams","StorageFactory","UserProfileFactory","rebate_showFactory","configFactory","trialOrderFactory","ENV",function(e,t,o,r,a,n,s,i,d,u,c,l,_,g){var p=i.id;t.$on("$ionicView.beforeEnter",function(){e.hideTabs="tabs-item-hide",!d.get("user")||d.get("user")&&1!=d.get("user").status?(t.lnvolved_status=0,t.login_status=0):(userid=d.get("user").data.userid,random=d.get("user").data.random,t.Member_group=d.get("profile").groupid,t.allpay_status=d.get("profile").alipay_status,t.emall_status=d.get("profile").email_status,t.name_status=d.get("profile").name_status,t.phone_status=d.get("profile").phone_status,u.set_username_taobao(userid,random),_.set_order_is_join(p,userid,random),_.set_complete_order(userid,random),t.lnvolved_status=1,t.login_status=1)}),t.fenxiang=function(){var e=t.showdata.title,o="[闪电试用 无需审核]"+t.showdata.title+"限量份数"+t.showdata.goods_number+"快来免费申请吧！",r=g.siteUrl+t.showdata.url,n=s("imgUrl")(t.showdata.thumb);window.plugins.Baidushare.bdshare(e,o,r,n,function(e){1==e&&a.show({noBackdrop:!0,template:"分享成功！",duration:1e3})},function(e){alert("encoding failed: "+e)})},t.ENV=g,t.Application_reasons="",t.commission_showloading=!0,t.Switch=1,t.data_time=Math.round((new Date).getTime()/1e3),t.$on("UserProfileFactory.set_username_taobao",function(){function e(){for(var e in o)1==o[e].is_default?t.data_bind_taobao_default=o[e]:t.data_bind_taobao_default=o[0]}t.data_bind_taobao=u.get_username_taobao();var o=t.data_bind_taobao.lists;e(),taobao_default_id=void 0==t.data_bind_taobao_default?"":t.data_bind_taobao_default.id});t.vm={};$(".s_part6 .part").live("click",function(){$(".s_part6 .part").attr("class","part"),$(this).attr("class","part sel")}),l.set_commission_config(),c.get_rebate_show(p),t.goods_body=function(){t.Switch=1},t.$on("trialOrderFactory.set_complete_order",function(){t.complete_order=_.get_complete_order()}),t.$on("configFactory.set_commission_config",function(){var e=l.get_commission_config();t.bind_alipay=e.data.buyer_join_condition.bind_alipay,t.bind_taobao=e.data.buyer_join_condition.bind_taobao,t.bind_email=e.data.buyer_join_condition.email,t.bind_phone=e.data.buyer_join_condition.phone,t.realname=e.data.buyer_join_condition.realname,t.num_trial_art=e.data.buyer_join_condition.num_trial_art}),t.$on("NewsContent.rebateshow",function(){t.showdata=c.getshow(),t.commission_showloading=!1}),t.$on("rebate_showFactory.set_good_user_list",function(){t.user_list=c.get_good_user_list(),t.user_list_showloading=!1}),t.good_user_list=function(){t.user_list_showloading=!0,t.Switch=2,c.set_good_user_list(p,1)},t.$on("trialOrderFactory.set_order_is_join",function(){t.order_is_join=_.get_order_is_join()}),t.Apply_commission=function(){if(1!=t.login_status)return a.show({noBackdrop:!0,template:"亲，请先登录后再申请！",duration:1500}),r.go("tab.user_login"),!1;if(1!=t.showdata.status)return a.show({noBackdrop:!0,template:"亲，当前活动未开始或已结束！",duration:1500}),!1;if(0==t.lnvolved_status)return a.show({noBackdrop:!0,template:"亲，您已参与过本次活动,不能再次参与！",duration:1500}),!1;if(5==t.bind_alipay&&1!=t.allpay_status||3==t.realname&&1!=t.name_status||2==t.bind_email&&1!=t.emall_status||1==t.bind_phone&&1!=t.phone_status||4==t.bind_taobao&&t.data_bind_taobao.count<1||t.num_trial_art>t.complete_order){var e=o.alert({title:"参与条件",okText:"我已知晓",okType:"button-assertive button-outlin button-outline",templateUrl:"a.html",scope:t});return e.then(function(e){}),!1}t.taobao_reason()},t.taobao_reason=function(){if(4==t.bind_taobao&&t.data_bind_taobao.count>0){var e=o.alert({title:"选择帐号",templateUrl:"b.html",scope:t,okText:"提交申请",buttons:[{text:"放弃"},{text:"提交申请",type:"button-assertive",onTap:function(e){t.Submit_trial()}}]});return e.then(function(e){}),!1}t.Submit_trial()},t.Submit_trial=function(e){a.show({noBackdrop:!0,template:"亲，正在为您提交申请！",duration:1500});var o=void 0==t.vm.data_bind_taobao_default?taobao_default_id:t.vm.data_bind_taobao_default.id.id;o=4==t.bind_taobao?o:"",_.set_commission_pay_submit(p,o,userid,random)},t.$on("trialOrderFactory.set_commission_pay_submit",function(){var e=_.get_commission_pay_submit();return 0==e.status?(a.show({noBackdrop:!0,template:e.msg,duration:1500}),!1):1==e.status?(a.show({noBackdrop:!0,template:"恭喜您！闪电试用抢购成功",duration:1500}),t.order_is_join.data=0,r.go("tab.commission_order_id",{id:e.data,goodid:p}),!1):void a.show({noBackdrop:!0,template:"程序员哥哥，正在抢修",duration:1500})})}]).controller("commission_order",["$rootScope","$timeout","$scope","$state","$ionicPopup","$ionicModal","$ionicLoading","ENV","StorageFactory","UserProfileFactory","trialOrderFactory","configFactory",function(e,t,o,r,a,n,s,i,d,u,c,l){o.$on("$ionicView.beforeEnter",function(){return e.hideTabs="tabs-item-hide",!d.get("user")||d.get("user")&&1!=d.get("user").status?(o.userInfo="",o.logo_status=0,r.go("tab.user_login"),!1):(userid=d.get("user").data.userid,random=d.get("user").data.random,o.logo_status=1,void 0)}),c.set_getorderlists(userid,"commission",1,random),o.ENV=i,o.wdfl_showloading=!0;var _=1;o.wdsy_hasNextPage=!1,l.set_commission_config(),o.$on("configFactory.set_commission_config",function(){var e=l.get_commission_config();o.buyer_write_order_time=60*e.data.buyer_write_order_time,o.seller_check_time=3600*e.data.seller_check_time,o.buyer_check_update_order_sn=3600*e.data.buyer_check_update_order_sn,o.seller_pay_time=3600*e.data.seller_pay_time}),o.$on("trialOrderFactory.set_getorderlists",function(){o.wdfl_showloading=!1,o.trial_getorderlists=c.get_getorderlists(),o.wdsy_hasNextPage=c.get_wdsy_hasNextPage(),o.$broadcast("scroll.infiniteScrollComplete")}),o.add_order_number=function(e,t,o,a){if(1==o)return r.go("tab.commission_show",{id:t}),!1;if(2==o||4==o||3==o)r.go("tab.commission_order_id",{id:e,goodid:t});else if(7!=o||a){if(5==o)return s.show({noBackdrop:!0,template:"亲,请等待商家最终确认返款！",duration:1500}),!1;r.go("tab.commission_show",{id:t})}else r.go("tab.commission_show",{id:t})},o.trial_order_changeTab=function(e,t){o.wdfl_showloading=!0,_=t,o.wdsy_showloading=!0,c.set_getorderlists(userid,"commission",_,random);for(var r=document.getElementById("sub_header_list").getElementsByTagName("a"),a=0;a<r.length;a++)r[a].className="button button-clear ";r[e].className="button button-clear sub_button_select"},o.wdfl_doRefresh=function(){c.set_getorderlists(userid,"commission",_,random),o.$broadcast("scroll.refreshComplete")},o.wdfl_loadMore=function(){c.wdsy_loadMore(userid,"commission",_,random)},$(".bar-subheader .button").bind("click",function(){$(".bar-subheader .button").attr("class","button button-clear"),$(this).attr("class","button button-clear sub_button_select")})}]).controller("commission_order_add",["$rootScope","$interval","$filter","$location","$scope","$state","$stateParams","$ionicPopup","$ionicModal","$ionicLoading","ENV","StorageFactory","rebate_showFactory","UserProfileFactory","trialOrderFactory","configFactory",function(e,t,o,r,a,n,s,i,d,u,c,l,_,g,p,f){if(a.$on("$ionicView.beforeEnter",function(){e.hideTabs="tabs-item-hide"}),!l.get("user")||l.get("user")&&1!=l.get("user").status)return n.go("tab.user_login"),!1;var m=s.goodid,h=s.id;a.ENV=c,a.txddh_showloading=!0;var b=l.get("user").data.userid,w=l.get("user").data.random;f.set_commission_config(),a.$on("configFactory.set_commission_config",function(){var e=f.get_commission_config();a.buyer_write_order_time=60*e.data.buyer_write_order_time,a.seller_check_time=3600*e.data.seller_check_time,a.buyer_check_update_order_sn=3600*e.data.buyer_check_update_order_sn}),_.get_rebate_show(m),a.order_vm={mum:""},a.The_sun=function(){u.show({noBackdrop:!0,template:"亲,正在提交...",duration:1e3}),p.set_shai_report(h,a.sybg_vm.img,a.sybg_vm.xinde,b,w)},a.$on("trialOrderFactory.set_shai_report",function(){var e=p.get_shai_report();return 1==e.status?(u.show({
noBackdrop:!0,template:e.msg,duration:1e3}),n.go("tab.rebate_order"),!1):void u.show({noBackdrop:!0,template:e.msg,duration:1e3})}),a.$on("NewsContent.rebateshow",function(){if(a.txddh_showdata=_.getshow(),a.txddh_showloading=!1,"search"==a.txddh_showdata.type){var e=a.txddh_showdata.goods_rule.keyword,e=e.replace(/，/g,","),t=e.split(",");a.goods_keyword=t[Math.floor(Math.random()*t.length)]}}),p.set_order_info(h,b,w),a.$on("trialOrderFactory.set_order_info",function(){a.order_info=p.get_order_info()}),a.add_order_number=function(){i.show({title:"填写订单号",templateUrl:"a.html",scope:a,buttons:[{text:"取消",type:"button-assertive button-outlin button-clear"},{text:"确定",type:"button-assertive button-outlin button-clear",onTap:function(e){var t=/^\d{9,20}$/;return t.test(a.order_vm.mum)?void p.set_fill_order_sn(h,a.order_vm.mum,b,w):(e.preventDefault(),u.show({noBackdrop:!0,template:"亲,订单号是9位以上数字！",duration:1e3}),!1)}}]})},a.$on("trialOrderFactory.set_fill_order_sn",function(){var e=p.get_fill_order_sn();1==e.status?(u.show({noBackdrop:!0,template:e.msg,duration:1e3}),n.go("tab.commission_order")):u.show({noBackdrop:!0,template:e.msg,duration:1e3})}),a.To_order=function(e,t,r){function n(e){var t=/^((https?|ftp|news):\/\/)?([a-z]([a-z0-9\-]*[\.。])+([a-z]{2}|aero|arpa|biz|com|coop|edu|gov|info|int|jobs|mil|museum|name|nato|net|org|pro|travel)|(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))(\/[a-z0-9_\-\.~]+)*(\/([a-z0-9_\-\.]*)(\?[a-z0-9+_\-\.%=&]*)?)?(#[a-z][a-z0-9_]*)?$/i;return domain=e.match(t),domain=domain[1]+"m."+domain[4]+domain[5],null!=domain&&domain.length>0?domain:""}t=o("f_source")(t);var s=t+"搜索下单";r=n(r),cordova.ThemeableBrowser.open(r,"_blank",{statusbar:{color:"#ffffffff"},toolbar:{height:44,color:"#f0f0f0ff"},title:{color:"#003264ff",staticText:s,showPageTitle:!0},backButton:{wwwImage:"img/back.png",wwwImagePressed:"img/back_pressed.png",align:"left",event:"backPressed"},closeButton:{wwwImage:"img/close.png",wwwImagePressed:"img/close_pressed.png",align:"right",event:"closePressed"},customButtons:[{wwwImage:"img/menu.png",wwwImagePressed:"img/menu.png",align:"right",event:"sharePressed"}],menu:{wwwImage:"img/menu2.png",wwwImagePressed:"img/menu2.png",title:"help",cancel:"Cancel",align:"right",event:"helloPressed"},backButtonCanClose:!0}).addEventListener("backPressed",function(e){}).addEventListener("sharePressed",function(e){alert("活动下单方式为：搜索下单\n搜索关键词："+a.txddh_showdata.keyword+"\n2.按照 "+o("f_sort")(a.txddh_showdata.sort)+" 排序\n3.宝贝位置大约在 "+a.txddh_showdata.goods_address+"\n4.查找掌柜旺旺"+a.txddh_showdata.goods_wangwang+"\n5.活动下单价："+a.txddh_showdata.goods_price+" 元\n6.活动完成：返还"+o("f_xiaoshu")(a.txddh_showdata.fan_price)+" 元\n7.下单完成之后，记得填写订单号。")}).addEventListener("helloPressed",function(e){var t=prompt("亲 请填写已付款下单的订单编号\n 您可在订单详情查看订单号\n对照订单号仔细输入\n如果输入错误,可在此修改\n提示：订单号一般为10位以上纯数字","");null!=t&&""!=t&&p.set_fill_order_sn(h,t,b,w)}).addEventListener("sharePressed2",function(e){}).addEventListener(cordova.ThemeableBrowser.EVT_ERR,function(e){console.error(e.message)}).addEventListener(cordova.ThemeableBrowser.EVT_WRN,function(e){})},a.Appeal=function(e,t,o){return 4!=e?!1:void n.go("tab.order_appeal",{id:t,aid:o})},a.Order_log=function(){n.go("tab.order_log",{id:h})},a.$on("trialOrderFactory.set_getorderlists",function(){a.wdsy_showloading=!1,a.trial_getorderlists=p.get_getorderlists()})}]).controller("so_list",["$rootScope","$scope","$ionicLoading","StorageFactory","soFactory",function(e,t,o,r,a){t.$on("$ionicView.beforeEnter",function(){e.hideTabs="tabs-item-hide"}),t.hot_showloading=!0,t.quyu=1,a.set_keyword_hot(),t.$on("soFactory.set_keyword_hot",function(){t.keyword_hot=a.get_keyword_hot(),t.hot_showloading=!1}),t.$on("soFactory.set_search_goods",function(){function e(e){e=e||[];for(var t={},o=0;o<e.length;o++){var r=e[o];"undefined"==typeof t[r]&&(t[r]=1)}e.length=0;for(var o in t)e[e.length]=o;return e}var o=a.get_search_goods();t.search_goods=e(o),t.so_showloading=!1}),t.data_keyword=r.get("keyword");var n=new Array;t.search=function(e){if(""==e||null==e)return o.show({noBackdrop:!0,template:"请输入搜索关键词",duration:1e3}),!1;if(t.quyu=2,t.so_showloading=!0,a.set_search_goods(e),t.data_keyword)for(var s in t.data_keyword)-1==e.indexOf(t.data_keyword[s])&&(key=t.data_keyword.concat(e),r.set("keyword",key));else n[0]=e,r.set("keyword",n)},t.dedele=function(){r.remove("keyword")}}]),angular.module("starter.directive",[]).directive("repeat",[function(){return{restrict:"A",require:"ngModel",link:function(e,t,o,r){if(r){var a=t.inheritedData("$formController")[o.repeat],n=function(e){var t=e===a.$viewValue;return r.$setValidity("repeat",t),t?e:void 0};r.$parsers.push(n),r.$formatters.push(n),a.$parsers.push(function(e){return r.$setValidity("repeat",e===r.$viewValue),e})}}}}]).directive("hideTabs",["$rootScope",function(e){return{restrict:"AE",link:function(t){e.hideTabs="tabs-item-hide",t.$on("$destroy",function(){e.hideTabs=""})}}}]).directive("bank",function(){return{restrict:"A",require:"ngModel",link:function(e,t,o,r){t.bind("keyup",function(){var e=t[0];if(""!=e.value){var o=new String(e.value);if(o=o.substring(0,23),null==o.match(".[0-9]{4}-[0-9]{4}-[0-9]{4}-[0-9]{7}")){if(null==o.match(".[0-9]{4}-[0-9]{4}-[0-9]{4}-[0-9]{7}|.[0-9]{4}-[0-9]{4}-[0-9]{4}-[0-9]{7}|.[0-9]{4}-[0-9]{4}-[0-9]{4}-[0-9]{7}|.[0-9]{4}-[0-9]{4}-[0-9]{4}-[0-9]{7}")){var r,a=accountChar="";for(r=0;r<o.length;r++)accountChar=o.substr(r,1),isNaN(accountChar)||" "==accountChar||(a+=accountChar);for(o="",r=0;r<a.length;r++)4==r&&(o+=" "),8==r&&(o+=" "),12==r&&(o+=" "),16==r&&(o+=" "),o+=a.substr(r,1)}}else o=" "+o.substring(1,5)+" "+o.substring(6,10)+" "+o.substring(14,18)+"-"+o.substring(18,25);o!=e.value&&(e.value=o)}})}}}).directive("datepicker",function(){return{restrict:"A",link:function(e,t,o){t.bind("blur",function(){var o=t[0].value;if(!o)return!1;e.Year_birth=o.substring(6,10),e.Birth_month=o.substring(10,12),e.Date_birth=o.substring(12,14),e.rq=o.substring(6,10)+"-"+o.substring(10,12)+"-"+o.substring(12,14),parseInt(o.substr(16,1))%2==1?e.Gender="男":e.Gender="女";var r=new Date,a=r.getMonth()+1,n=r.getDate(),s=r.getFullYear()-o.substring(6,10)-1;(o.substring(10,12)<a||o.substring(10,12)==a&&o.substring(12,14)<=n)&&s++,e.age=s})}}}).directive("repeatphone",["User_registerFactory",function(e){return{restrict:"A",require:"ngModel",link:function(t,o,r,a){o.bind("blur",function(){var r=o[0].value;e.getsms(r),t.$on("NewsContent.getsms",function(){var t=e.setsms();1===t?a.$setValidity("repeatphone",!0):0===t&&a.$setValidity("repeatphone",!1)})})}}}]).directive("userphone",["$ionicLoading","$interval","User_registerFactory","User_registerFactory",function(e,t,o,o){return{restrict:"A",require:"ngModel",link:function(r,a,n,s){a.bind("click",function(){var n=a[0].value;o.getsms(n),r.$on("NewsContent.getsms",function(){var a=o.setsms();0==a.status?(r.isDisabled=!1,r.user_phone_state=!0,e.show({noBackdrop:!0,template:a.msg,duration:1e3})):1==a.status?(o.send_sms(n),r.$on("NewsContent.sendsms",function(){var a=o.get_send_sms();if(0==a.status)return e.show({noBackdrop:!0,template:a.msg,duration:1500}),void(r.isDisabled=!0);if(1==a.status){e.show({noBackdrop:!0,template:"验证码已发送到您手机！",duration:1e3});var n=60;r.text="请等待"+n+"秒",r.isDisabled=!0;var s=t(function(){n--,r.text="请等待"+n+"秒",0==n&&(t.cancel(s),r.text="再次获取",r.isDisabled=!1)},1e3)}})):(e.show({noBackdrop:!0,template:"发送失败，请重新获取！",duration:1e3}),r.isDisabled=!1)})})}}}]).directive("diHref",["$location","$route",function(e,t){return function(o,r,a){o.$watch("diHref",function(){a.diHref&&(r.attr("href",a.diHref),r.bind("click",function(r){o.$apply(function(){e.path()==a.diHref&&t.reload()})}))})}}]).directive("smsauthentication",["$parse","User_registerFactory",function(e,t){return{scope:{number:"="},require:"ngModel",link:function(e,o,r,a){o.bind("keyup",function(){t.register_check_sms(),e.$on("NewsContent.registerchecksms",function(){var e=t.get_register_check_sms();0===e?a.$setValidity("sms",!0):1===e&&a.$setValidity("sms",!1)})})}}}]);var r=angular.module("starter.filter",[]);r.filter("announce_state",function(){return function(e){return"0"==e?"[未读] ":"1"==e?"":void 0}}),r.filter("f_name_status",function(){return function(e){return 0==e?"审核中":1==e?"已认证":-1==e?"审核未通过":"待认证"}}),r.filter("f_user_qq",function(){return function(e){return 0==e?"未绑定":e}}),r.filter("is_default_taobao",function(e){return function(t){return 1==t?e.trustAsHtml(" <span style ='color:red;font-size:14px;'>默认使用该帐号</span> "):""}}),r.filter("f_alipay_status",function(){return function(e){return 0==e?"未绑定":1==e?"已绑定":void 0}}),r.filter("f_bank_status",function(){return function(e){return 0==e?"未绑定":1==e?"已绑定":void 0}}),r.filter("f_protype",function(){return function(e){return 1==e?" ":2==e?"hd_2":"hd_2 "}}),r.filter("f_source",function(){return function(e){return 1==e?"淘宝 ":2==e?"天猫":3==e?"京东 ":""}}),r.filter("f_sort",function(){return function(e){return 1==e?"综合":2==e?"人气":3==e?"销量 ":4==e?"信用 ":5==e?"最新 ":6==e?"价格":e}}),r.filter("f_img_source",function(){return function(e){return 1==e?"img/taobao.jpg":2==e?"img/tianmao.jpg":3==e?"img/jd.png":""}}),r.filter("f_fomtime",["$rootScope","$interval","$q",function(e,t,o){return function(e){function o(){var t=(new Date,e-Math.round((new Date).getTime()/1e3));return d=Math.floor(t/60/60/24),h=Math.floor(t/60/60%24),m=Math.floor(t/60%60),s=Math.floor(t%60),d=0==d?"":d+"天",h=0==h?"":h+"小时",r=d+h+m+"分"+s+"秒",$("#"+e).html(r),r}if(e-Math.round((new Date).getTime()/1e3)<0)return"已结束!";var r;return t(function(){return e-Math.round((new Date).getTime()/1e3)<0?(t.cancel(),"已结束!"):void o()},1e3),o(),r}}]),r.filter("f_tixian_status",function(){return function(e){return 1==e?" 已完成    ":0==e?"处理中":-1==e?"提现失败":""}}),r.filter("f_phone_status",function(){return function(e){return 0==e?"待认证":""==e?"待认证":1==e?e:void 0}}),r.filter("user_email_state",["$sce",function(e){return function(t){return"0"==t?e.trustAsHtml(" <span style ='color: red;'>未认证</span> "):"1"==t?e.trustAsHtml(" <span style ='color: green;'>已认证</span> "):void 0}}]),r.filter("goods_state",function(){return function(e){return"1"==e?"活动进行中":"2"==e?"活动未上架":"3"==e?"活动结束":"参数不正确"}}),r.filter("f_t_status",function(){return function(e){return"1"==e?"试用申请审核中":"2"==e?"恭喜您获得试用资格,快去下单!":"3"==e?"订单号审核中":"4"==e?"订单号有误,请修改!":"6"==e?"申述处理中":"7"==e?"已完成":"8"==e?"填写试用报告":"0"==e?"已关闭":e+"订单状态不对"}}),r.filter("imgUrl",["ENV",function(e){return function(t){return t?t="http"==t.substr(0,4).toLowerCase()?t:e.imgUrl+t:""}}]),r.filter("f_nickname",function(){return function(e){return"新会员，请完善资料"==e?"试客***":e}}),r.filter("taobao_is_default",["$sce",function(e){return function(t){return"0"==t?t:"1"==t?e.trustAsHtml(" (<span style ='color: green;'>默认</span>) "):void 0}}]),r.filter("f_img_url",["ENV",function(e){return function(t){if(!t)return"";var o=/<img([^<]*)src=\"(?!(http))(.*?)\"([^<]*)>/gim;return t=t.replace(o,'<img $1 src="'+e.imgUrl+'$2$3" />')}}]),r.filter("f_report_img_url",["ENV",function(e){return function(e){return e?e=e.replace(/<img.*\/>/gi,""):!1}}]),r.filter("f_img_html",["$sce","ENV",function(e,t){return function(t){return t?(t=t.replace(/\\/gi,""),e.trustAsHtml(t)):!1}}]),r.filter("f_shop_liang",["$sce","ENV",function(e,t){return function(e){return $(".i_PointsDetail .s_part6 .R span:eq(0)").attr("class","sel"),e}}]),r.filter("f_m_type",["$sce","ENV",function(e,t){return function(e){return"money"==e||"cash"==e?"现金RMB：":"point"==e||"points"==e?"积分：":void 0}}]),r.filter("f_jiang_1",["$sce","ENV",function(e,t){return function(e){return 1==e?"一":2==e?"二":3==e?"三":4==e?"四":5==e?"五":6==e?"六":void 0}}]),r.filter("f_jiang_time",["$sce","ENV",function(e,t){return function(e){var t=60,o=60*t,r=24*o,a=30*r,n=Math.round((new Date).getTime()/1e3),s=n-e,i=s/a,d=s/(7*r),u=s/r,c=s/o,l=s/t;return i>=1?parseInt(i)+"个月前":d>=1?parseInt(d)+"周前":u>=1?parseInt(u)+"天前":c>=1?parseInt(c)+"小时前":l>=1?parseInt(l)+"分钟前":"刚刚"}}]),r.filter("f_jifen_status",["$sce","ENV",function(e,t){return function(e){return 1==e?"已完成兑换 请注意查收":0==e?"请等待审核":void 0}}]),r.filter("f_mobey",["$sce",function(e){return function(t){return t>0?e.trustAsHtml("<span style='color:green'> 收入 +"+t+"</span>"):e.trustAsHtml("<span style='color:red'> 支出 -"+t+"</span>")}}]),r.filter("f_xiaoshu",function(){return function(e){return e.toFixed(2)}}),r.filter("f_bu",function(){return function(e){return 1==e?"积分":2==e?"现金":void 0}}),r.filter("announce_show",["$sce",function(e){return function(t){return t?(t=t.replace(/您好/gi,"</p>您好"),t=t.replace(/！/gi,"！</p>"),t=t.replace(/资金/gi,"</p>资金"),t=t.replace(/商品名称/gi,"</p>商品名称"),t=t.replace(/请及时/gi,"</p>请及时"),t=t.replace(/请尽快/gi,"</p>请及时"),e.trustAsHtml(t)):""}}]),r.filter("imgzheng",["$sce",function(e){return function(e){console.log(p),$(".hang1").each(function(){$(this).find("img").height()<$(this).find("img").width()&&$(this).find("img").css("height",$(this).find("img").width())})}}]),angular.module("starter",["ionic","ngCordova","starter.controllers","starter.config","starter.services","starter.directive","starter.filter","ngResource"]).run(["$rootScope","$location","$state","$ionicPlatform","$timeout","$ionicHistory","$ionicPopup","$cordovaFileTransfer","$cordovaFileOpener2","$ionicLoading","$cordovaNetwork","ENV","configFactory","jpushService",function(e,t,o,r,a,n,s,i,d,u,c,l,_,g){function p(){$ionicActionSheet.show({titleText:"检查更新",buttons:[{text:"关于"}],destructiveText:"检查更新",cancelText:"取消",cancel:function(){},destructiveButtonClicked:function(){checkUpdate()},buttonClicked:function(e){}}),a(function(){hideSheet()},2e3)}function f(){var t=s.confirm({title:"版本升级",template:_.get_app_config().content,cancelText:"取消",cancelType:"button-stable button-outlin button-outline",okText:"升级",okType:"button-assertive button-outlin button-outline"});t.then(function(t){if(t){var o=_.get_app_config().url,r="file:///storage/sdcard0/Download/trial.apk",a=!0,n={};i.download(o,r,n,a).then(function(e){u.show({noBackdrop:!0,template:"文件下载完成,即将转入自动安装..",duration:500}),d.open(r,"application/vnd.android.package-archive").then(function(){},function(e){alert("安装失败")}),u.hide()},function(e){u.show({noBackdrop:!0,template:"文件下载失败,请手动下载更新",duration:500}),window.alert(e)},function(t){e.err1=t;var o=t.loaded/1024/1024;u.show({template:"请等待 已下载："+o.toFixed(1)+"mb,文件总大小:"+e.app_size})})}})}r.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleLightContent();var t=ionic.Platform.isAndroid();if(t){_.set_app_config();var r=function(e){},a=function(e){var t=e;"string"==typeof e&&(t=JSON.parse(e));var r=t.extras["cn.jpush.android.EXTRA"].id;r&&o.go("tab.user_announce_show",{type:3,id:r})},n={stac:r,oniac:a};g.init(n);c.isOnline(),c.isOffline()}document.addEventListener("menubutton",p,!1),e.$on("$cordovaNetwork:online",function(e,t){u.show({noBackdrop:!0,template:"网络已经恢复正常.",duration:1500}),window.location.reload()}),e.$on("$cordovaNetwork:offline",function(e,t){u.show({noBackdrop:!0,template:"网络掉线了 请检查网络设置..",duration:1500})})}),e.version=l.version,e.$on("configFactory.set_app_config",function(){var t=_.get_app_config(),o=t.version,r=l.version;e.app_size=t.app_size,r!=o&&f()}),e.checkUpdate=function(){_.set_app_updale()},e.$on("configFactory.set_app_updale",function(){var t=_.get_app_config(),o=t.version,r=l.version;e.app_size=t.app_size,r!=o?f():u.show({noBackdrop:!0,template:"您当前已经是最新版本 无需更新",duration:1500})}),window.onerror=function(e,t,o){var r=t.lastIndexOf("/");return r>-1&&(t=t.substring(r+1)),alert("ERROR in "+t+" (line #"+o+"): "+e),!1},r.registerBackButtonAction(function(e){function o(){var e=s.confirm({title:"<strong>退出应用?</strong>",template:"你确定要退出应用吗?",okText:"退出",okType:"button-assertive button-outlin button-outline",cancelText:"取消",cancelType:"button-stable button-outlin button-outline"});e.then(function(e){e&&ionic.Platform.exitApp()})}return e.preventDefault(),"#/tab/home"==t.path()?o():n.backView()?n.goBack():o(),!1},101)}]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,t,o){o.platform.ios.tabs.style("standard"),o.platform.ios.tabs.position("bottom"),o.platform.android.tabs.style("standard"),o.platform.android.tabs.position("standard"),o.platform.ios.navBar.alignTitle("center"),o.platform.android.navBar.alignTitle("left"),o.platform.ios.backButton.previousTitleText("").icon("ion-ios-arrow-thin-left"),o.platform.android.backButton.previousTitleText("").icon("ion-android-arrow-back"),o.platform.ios.views.transition("ios"),o.platform.android.views.transition("android"),o.navBar.alignTitle("center"),e.state("tab",{url:"/tab","abstract":!0,templateUrl:"templates/tabs.html"}).state("tab.home",{url:"/home",views:{"tab-home":{templateUrl:"templates/home/home.html",controller:"HomeCtrl"}}}).state("tab.trial",{url:"/trial",views:{"tab-trial":{templateUrl:"templates/trial/list.html",controller:"trial_list"}}}).state("tab.trial_red",{url:"/trial_red",views:{"tab-trial":{templateUrl:"templates/trial/list-red.html",controller:"trial_list-red"}}}).state("tab.show_trial",{url:"/trial/:id",views:{"tab-trial":{templateUrl:"templates/trial/show.html",controller:"show_trial"}}}).state("tab.rebate",{url:"/rebate",views:{"tab-rebate":{templateUrl:"templates/rebate/list.html",controller:"rebate_list"}}}).state("tab.rebate_show",{url:"/rebate/:id",views:{"tab-rebate":{templateUrl:"templates/rebate/show.html",controller:"rebate_show"}}}).state("tab.rebate_rebate_catid",{url:"/rebate/:catid",views:{"tab-rebate":{templateUrl:"templates/rebate/list.html",controller:"rebate_list"}}}).state("tab.duo",{url:"/duo",views:{"tab-duo":{templateUrl:"templates/duo.html",controller:"duo"}}}).state("article_catid_list",{url:"/article/:catid",templateUrl:"templates/article/article_catid_list.html",controller:"article_catid_helplist"}).state("article_catid_show_list",{url:"/article/catid/:catid",templateUrl:"templates/article/article_catid_show_list.html",controller:"article_catid_show_list"}).state("article_show",{url:"/article/show/:id",templateUrl:"templates/article/article_show.html",controller:"article_show"}).state("tab.user",{url:"/user",views:{"tab-user":{templateUrl:"templates/user/user.html",controller:"Userhome"}}}).state("tab.user_login",{url:"/user/login",views:{"tab-user":{templateUrl:"templates/user/login.html",controller:"User_login"}}}).state("tab.user_forget",{url:"/user/forget",views:{"tab-user":{templateUrl:"templates/user/user_forget.html",controller:"Userforget"}}}).state("tab.user_forget2",{url:"/user/forget_2",views:{"tab-user":{templateUrl:"templates/user/user_forget_2.html",controller:"Userforget"}}}).state("tab.user_profile_password",{url:"/user/profile/password",views:{"tab-user":{templateUrl:"templates/user/user_profile_password.html",controller:"UserProfilePassword"}}}).state("tab.register",{url:"/register",views:{"tab-user":{templateUrl:"templates/user/register.html",controller:"User_register"}}}).state("tab.rebate_order",{url:"/user/rebate_order",views:{"tab-user":{templateUrl:"templates/user/rebate_order.html",controller:"rebate_order"}}}).state("tab.rebate_order_id",{url:"/user/rebate_order/:id/:goodid",views:{"tab-user":{templateUrl:"templates/user/rebate_order_add.html",controller:"rebate_order_add"}}}).state("tab.commission_order",{url:"/user/commission_order",views:{"tab-user":{templateUrl:"templates/user/commission_order.html",controller:"commission_order"}}}).state("tab.trial_order",{url:"/user/trial_order",views:{"tab-user":{templateUrl:"templates/user/trial_order.html",controller:"trial_order"}}}).state("tab.trial_order_id",{url:"/user/trial_order/:id/:goodid",views:{"tab-user":{templateUrl:"templates/user/trial_order_add.html",controller:"trial_order_add"}}}).state("tab.commission_order_id",{url:"/user/commission_order/:id/:goodid",views:{"tab-user":{templateUrl:"templates/user/commission_order_add.html",controller:"commission_order_add"}}}).state("tab.order_appeal",{url:"/user/order_appeal/:id/:aid",views:{"tab-user":{templateUrl:"templates/user/order_appeal.html",controller:"order_Appeal"}}}).state("tab.order_log",{url:"/user/order_log/:id",views:{"tab-user":{templateUrl:"templates/user/order_log.html",controller:"Userorder_log"}}}).state("tab.trial_order_report",{url:"/user/trial_order/report/:id/:goodid",views:{"tab-user":{templateUrl:"templates/user/trial_order_add_report.html",controller:"trial_order_add"}}}).state("tab.rebate_The_sun",{url:"/user/rebate_The_sun/report/:id/:goodid",views:{"tab-user":{templateUrl:"templates/user/rebate_The_sun.html",controller:"rebate_order_add"}}}).state("tab.task_order",{url:"/user/task_order",views:{"tab-user":{templateUrl:"templates/user/task_order.html",controller:"task_order"}}}).state("tab.task",{url:"/task",views:{"tab-duo":{templateUrl:"templates/task/list.html",controller:"task_list"}}}).state("tab.task_show",{url:"/task/:id",views:{"tab-duo":{templateUrl:"templates/task/show.html",controller:"task_show"}}}).state("tab.user_deposite",{url:"/user/deposite",views:{"tab-user":{templateUrl:"templates/user/user_deposite.html",controller:"UserDeposite"}}}).state("tab.user_deposite_record",{url:"/user/deposite_record",views:{"tab-user":{templateUrl:"templates/user/user_deposite_record.html",controller:"UserDeposite"}}}).state("tab.user_log",{url:"/user/log",views:{"tab-user":{templateUrl:"templates/user/user_log.html",controller:"UserLog"}}}).state("tab.user_profile",{url:"/user/profile",views:{"tab-user":{templateUrl:"templates/user/user_profile.html",controller:"UserPersonal"}}}).state("tab.user_profile_nickname",{url:"/user/profile/nickname",views:{"tab-user":{templateUrl:"templates/user/user_profile_nickname.html",controller:"UserProfileNiknname"}}}).state("tab.user_profile_phone",{url:"/user/profile/phone",views:{"tab-user":{templateUrl:"templates/user/user_profile_phone.html",controller:"UserProfilePhone"}}}).state("tab.user_profile_qq",{url:"/user/profile/qq",views:{"tab-user":{templateUrl:"templates/user/user_profile_qq.html",controller:"UserProfileQQ"}}}).state("tab.user_profile_email",{url:"/user/profile/email",views:{"tab-user":{templateUrl:"templates/user/user_profile_email.html",controller:"UserProfileEmail"}}}).state("tab.user_profile_taobao",{url:"/user/profile/taobao",views:{"tab-user":{templateUrl:"templates/user/user_profile_taobao.html",controller:"UserProfiletaobao"}}}).state("tab.user_profile_card",{url:"/user/profile/card",views:{"tab-user":{templateUrl:"templates/user/user_profile_card.html",controller:"UserProfileCard"}}}).state("tab.user_profile_alipay",{url:"/user/profile/alipay",views:{"tab-user":{templateUrl:"templates/user/user_profile_alipay.html",controller:"UserProfileAllpay"}}}).state("tab.user_profile_bankcard",{url:"/user/profile/bankcard",views:{"tab-user":{templateUrl:"templates/user/user_profile_bankcard.html",controller:"UserProfileBankCard"}}}).state("tab.user_profile_address",{url:"/user/profile/address",views:{"tab-user":{templateUrl:"templates/user/user_profile_address.html",controller:"UserProfileAddress"}}}).state("tab.user_announce",{url:"/user/announce",views:{"tab-user":{templateUrl:"templates/user/user_announce.html",controller:"user_announce"}}}).state("tab.user_announce_show",{url:"/user/announce/:type/:id",views:{"tab-user":{templateUrl:"templates/user/user_announce_show.html",controller:"announce_show"}}}).state("tab.jifenduihuan",{url:"/jifenduihuan",views:{"tab-duo":{templateUrl:"templates/Integral/list.html",controller:"integral_list"}}}).state("tab.jifen_show",{url:"/jifen/:id",views:{"tab-duo":{templateUrl:"templates/Integral/show.html",controller:"integral_show"}}}).state("tab.user_jifen_order",{url:"/user/jifen_order",views:{"tab-user":{templateUrl:"templates/user/jifen_oeder.html",controller:"jifen_order"}}}).state("tab.invitation",{url:"/invitation",views:{"tab-duo":{templateUrl:"templates/user/invitation.html",controller:"invitation"}}}).state("tab.invitation_log",{url:"/invitation_log",views:{"tab-duo":{templateUrl:"templates/user/invitation.log.html",controller:"invitation"}}}).state("tab.trial_help_se",{url:"/trial_help_search",views:{"tab-duo":{templateUrl:"templates/trial/help.html",controller:"help"}}}).state("tab.fenxiang",{url:"/fenxiang",views:{"tab-duo":{templateUrl:"index.2.html",controller:"help"}}}).state("tab.help_order_sn",{url:"/help/order_sn",views:{"tab-duo":{templateUrl:"templates/article/order_help.html",controller:"help"}}}).state("tab.help_so",{url:"/help/so",views:{"tab-duo":{templateUrl:"templates/article/so_help.html",controller:"help"}}}).state("tab.help_apply",{url:"/help/apply",views:{"tab-duo":{templateUrl:"templates/article/apply_help.html",controller:"help"}}}).state("tab.help_commission",{url:"/help/commission",views:{"tab-duo":{templateUrl:"templates/article/commission_help.html",controller:"help"}}}).state("tab.help_about",{url:"/help/about",views:{"tab-duo":{templateUrl:"templates/article/about_help.html",controller:"help"}}}).state("tab.article_index",{url:"/article",views:{"tab-duo":{templateUrl:"templates/article/article_index.html",controller:"help"}}}).state("tab.trial_help",{url:"/trial_help",views:{"tab-duo":{templateUrl:"templates/article/trial_help.html",controller:"help"}}}).state("tab.jiang",{url:"/jiang",views:{"tab-duo":{templateUrl:"templates/user/jiang.html",controller:"jiang"}}}).state("tab.jiang_log",{url:"/jiang_log",views:{"tab-duo":{templateUrl:"templates/user/jiang_log.html",controller:"jiang"}}}).state("tab.commission",{url:"/commission",views:{"tab-duo":{templateUrl:"templates/commission/list.html",controller:"commission_list"}}}).state("tab.commission_show",{url:"/commission/:id",views:{"tab-duo":{templateUrl:"templates/commission/show.html",controller:"commission_show"}}}).state("tab.so",{url:"/so",views:{"tab-duo":{templateUrl:"templates/so/list.html",controller:"so_list"}}}),t.otherwise("/tab/home")}]),angular.module("starter.services",[]).factory("StorageFactory",function(){return{set:function(e,t){return window.localStorage.setItem(e,window.JSON.stringify(t))},get:function(e){return window.JSON.parse(window.localStorage.getItem(e))},remove:function(e){return window.localStorage.removeItem(e)},clear:function(){window.localStorage.clear()},remove2:function(){this.remove("user"),this.remove("taobao"),this.remove("profile")}}}).factory("configFactory",["$resource","$rootScope","ENV",function(e,t,o){var r,a,n,s,i,d,u=o.api,c=e(u+"&a=get_activity_config",{},{query:{method:"get",cache:!0,timeout:2e4}}),l=e(u+"&a=get_rebate_config",{},{query:{method:"get",cache:!0,timeout:2e4}}),_=e(u+"&a=answer_task",{},{query:{method:"get",cache:!0,timeout:2e4}}),g=e(u+"&a=get_friends_config",{},{query:{method:"get",cache:!0,timeout:2e4}}),p=e(u+"&a=get_reward_config",{},{query:{method:"get",cache:!0,timeout:2e4}}),f=e(u+"&a=get_commission_config",{},{query:{method:"get",cache:!0,timeout:2e4}}),m=e(u+"&a=get_app_config",{},{query:{method:"get",cache:!0,timeout:2e4}});return{set_trial_config:function(){c.query({},function(e){r=e,t.$broadcast("configFactory.set_trial_config")})},get_trial_config:function(){return r?r:!1},set_rebate_config:function(){l.query({},function(e){a=e,t.$broadcast("configFactory.set_rebate_config")})},get_rebate_config:function(){return void 0==a?!1:a},set_answer_task:function(){_.query({},function(e){n=e,t.$broadcast("configFactory.set_answer_task")})},get_answer_task:function(){return void 0==a?!1:a},set_friends_config:function(){g.query({},function(e){s=e,t.$broadcast("configFactory.set_friends_config")})},get_friends_config:function(){return void 0==s?!1:s},set_reward_config:function(){p.query({},function(e){i=e,t.$broadcast("configFactory.set_reward_config")})},get_reward_config:function(){return void 0==i?!1:i},set_commission_config:function(){f.query({},function(e){i=e,t.$broadcast("configFactory.set_commission_config")})},get_commission_config:function(){return void 0==i?!1:i},set_app_config:function(){m.query({},function(e){d=e,t.$broadcast("configFactory.set_app_config")})},get_app_config:function(){return d.data},set_app_updale:function(){m.query({},function(e){d=e,t.$broadcast("configFactory.set_app_updale")})},get_app_updale:function(){return d.data}}}]).factory("articlehelplistFactory",["$rootScope","$resource","ENV","$stateParams",function(e,t,o,r){var a,n="2",s=t(o.api);return{all:function(t){s.query({a:"gethelplist",catid:t},function(t){a=t,e.$broadcast("articlehelplistFactory.all")})},catid_helplist:function(){return n=r.catid,e.catid_helplist=s.query({a:"gethelplist",catid:n}),e.catid_helplist},article_catid_show_list:function(){return n=r.catid,e.article_catid_show_list=s.query({a:"getcatidlist",catid:n}),e.article_catid_show_list},get_lists:function(){return a}}}]).factory("article_showFactory",["$resource","$rootScope","ENV",function(e,t,o){var r=o.api,a="",n=e(r,{},{query:{method:"get",params:{a:"helpshow",aid:"@aid"},cache:!0,timeout:2e4}});return{get:function(e){return n.query({a:"helpshow",id:e},function(e){a=e,t.$broadcast("NewsContent.articleshow")})},getArticle:function(){return a}}}]).factory("trial_listFactory",["$rootScope","$resource","ENV","$stateParams",function(e,t,o,r){var a,n=o.api,s={},i="goodslists",d="trial",u="0",c="id",l=t(n,{},{query:{method:"get",params:{a:"getPortalList",catid:"@catid",page:"@page"},timeout:2e4}}),_=t(n,{},{query:{method:"get",params:{a:"isrecommend",catid:"@catid",page:"@page"},timeout:2e4}});return{categorylists:function(){return e.categorylists=l.get({a:"goods_categorylists"}),e.categorylists},set_goods_isrecommend:function(t){_.query({mod:t},function(t){a=t,e.$broadcast("trial_listFactory.set_goods_isrecommend")})},get_goods_isrecommend:function(){return a.data},getTopTopics:function(){var t=!0;l.query({mod:d,a:i,page:1,catid:u,orderby:c,orderway:"desc"},function(o){o.lists.length<10&&(t=!1),s[u]={hasNextPage:t,nextPage:2,data:o.lists},e.$broadcast("PortalList.portalsUpdated")})},getArticles:function(){return void 0===s[u]?!1:s[u].data},getMoreTopics:function(){if(void 0===s[u])return!1;var t=s[u].hasNextPage,o=s[u].nextPage,r=s[u].data;l.query({mod:d,a:i,catid:u,orderby:c,orderway:"desc",page:o},function(a){o++,a.lists.length<10&&(t=!1),r=r.concat(a.lists),s[u]={hasNextPage:t,nextPage:o,data:r},e.$broadcast("PortalList.portalsUpdated")})},getTopTopics_red:function(){var t=!0;l.query({mod:d,a:i,page:1,protype:2,catid:u,orderby:c,orderway:"desc"},function(o){o.lists.length<10&&(t=!1),s[u]={hasNextPage:t,nextPage:2,data:o.lists},e.$broadcast("PortalList.portalsUpdated")})},getArticles:function(){return void 0===s[u]?!1:s[u].data},getMoreTopics_red:function(){if(void 0===s[u])return!1;var t=s[u].hasNextPage,o=s[u].nextPage,r=s[u].data;l.query({mod:d,a:i,catid:u,orderby:c,orderway:"desc",protype:2,page:o},function(a){o++,a.lists.length<10&&(t=!1),r=r.concat(a.lists),s[u]={hasNextPage:t,nextPage:o,data:r},e.$broadcast("PortalList.portalsUpdated")})},goods_catid_list:function(e){u=e,this.getTopTopics()},goods_catid_list_order:function(e){c=e,this.getTopTopics()},hasNextPage:function(){return void 0===s[u]?!1:s[u].hasNextPage}}}]).factory("rebate_listFactory",["$rootScope","$resource","ENV","$stateParams",function(e,t,o,r){var a=o.api,n={},s="goodslists",i="rebate",d="1",u="0",c="id",l=t(a,{},{query:{method:"get",params:{a:"getPortalList",catid:"@catid",page:"@page"},timeout:2e4}});return{categorylists:function(){return e.categorylists=l.get({a:"goods_categorylists"}),e.categorylists},goods_isrecommend:function(){return e.isrecommend=l.get({a:s,mod:i,status:d,isrecommend:1}),e.isrecommend},getTopTopics:function(){var t=!0;l.query({mod:i,a:s,page:1,catid:u,orderby:c,orderway:"desc"},function(o){o.count<10&&(t=!1),n[u]={hasNextPage:t,nextPage:2,data:o.lists},e.$broadcast("PortalList.portalsUpdated")})},getArticles:function(){return void 0===n[u]?!1:n[u].data},getMoreTopics:function(){if(void 0===n[u])return!1;var t=n[u].hasNextPage,o=n[u].nextPage,r=n[u].data;l.query({mod:i,
a:s,catid:u,orderby:c,orderway:"desc",page:o},function(a,s){o++,a.lists.length<10&&(t=!1),r=r.concat(a.lists),n[u]={hasNextPage:t,nextPage:o,data:r},e.$broadcast("PortalList.portalsUpdated")},function(e){})},goods_catid_list:function(e){u=e,this.getTopTopics()},goods_catid_list_order:function(e){c=e,this.getTopTopics()},hasNextPage:function(){return void 0===n[u]?!1:n[u].hasNextPage}}}]).factory("commissionFactory",["$rootScope","$resource","ENV","$stateParams",function(e,t,o,r){var a=o.api,n={},s="goodslists",i="commission",d="1",u="0",c="id",l=t(a,{},{query:{method:"get",params:{a:"getPortalList",catid:"@catid",page:"@page"},timeout:2e4}});return{categorylists:function(){return e.categorylists=l.get({a:"goods_categorylists"}),e.categorylists},goods_isrecommend:function(){return e.isrecommend=l.get({a:s,mod:i,status:d,isrecommend:1}),e.isrecommend},getTopTopics:function(){var t=!0;l.query({mod:i,a:s,page:1,catid:u,orderby:c,orderway:"desc"},function(o){o.count<10&&(t=!1),n[u]={hasNextPage:t,nextPage:2,data:o.lists},e.$broadcast("commissionFactory.getTopTopics")})},getArticles:function(){return void 0===n[u]?!1:n[u].data},getMoreTopics:function(){if(void 0===n[u])return!1;var t=n[u].hasNextPage,o=n[u].nextPage,r=n[u].data;l.query({mod:i,a:s,catid:u,orderby:c,orderway:"desc",page:o},function(a,s){o++,a.lists.length<10&&(t=!1),r=r.concat(a.lists),n[u]={hasNextPage:t,nextPage:o,data:r},e.$broadcast("commissionFactory.getTopTopics")},function(e){})},goods_catid_list:function(e){u=e,this.getTopTopics()},goods_catid_list_order:function(e){c=e,this.getTopTopics()},hasNextPage:function(){return void 0===n[u]?!1:n[u].hasNextPage}}}]).factory("categorylistsFactory",["ENV","$resource","$rootScope",function(e,t,o){var r,a=e.api,n=t(a,{},{query:{method:"get",params:{a:"goods_categorylists"},cache:!0,timeout:2e4}});return{category_list:function(){n.query({a:"goods_categorylists"},function(e){r=e.lists,o.$broadcast("categorylistsFactory.category_list")})},get_listdata:function(){return r}}}]).factory("user_announceFactory",["ENV","$resource","$rootScope",function(e,t,o){var r,a=e.api,n={},s="",i="1",d=t(a,{},{query:{method:"get",params:{a:"getmessage"},timeout:2e4}}),u=t(a);return{announce_list:function(e,t,r){var a=!0;d.get({a:"getmessage",userid:e,random:e,type:r},function(e){e.lists<10&&(a=!1),n[s]={hasNextPage:a,nextPage:2,data:e.lists},o.$broadcast("user_announceFactory.announce_list")})},get_listdata:function(){return void 0===n[s]?!1:n[s].data},getMoreTopics:function(e,t,r){if(void 0===n[s])return!1;var a=n[s].hasNextPage,i=n[s].nextPage,u=n[s].data;d.query({a:"getmessage",userid:e,random:t,type:r,page:i},function(e){i++,e.lists.length<10&&(a=!1),u=u.concat(e.lists),n[s]={hasNextPage:a,nextPage:i,data:u},o.$broadcast("user_announceFactory.announce_list")})},hasNextPage:function(){return void 0===n[s]?!1:n[s].hasNextPage},announce_type:function(e){i=e,this.announce_list()},set_announce_show:function(e,t){u.get({a:"getmessage_show",type:e,id:t},function(e){r=e,o.$broadcast("user_announceFactory.set_announce_show")})},get_set_announce_show:function(){return r}}}]).factory("rebate_showFactory",["$resource","$rootScope","ENV",function(e,t,o){var r,a,n,s=o.api,i="",d=e(s+"&a=good_user_list"),u=e(s+"&a=trial_report_lists"),c=e(s+"&a=goods_report_lists"),l=e(s,{},{query:{method:"get",params:{a:"goods_show",good:"@aid"},cache:!0,timeout:2e4}});return{get_rebate_show:function(e){return l.query({a:"goods_show",goods_id:e},function(e){i=e.lists,t.$broadcast("NewsContent.rebateshow")})},getshow:function(){return i},set_good_user_list:function(e,o){d.get({goods_id:e,state:o},function(e){r=e,t.$broadcast("rebate_showFactory.set_good_user_list")})},get_good_user_list:function(){return r.lists},set_trial_report_lists:function(e){u.get({goods_id:e},function(e){var o=!0;e.lists.length<10&&(o=!1),a={page:1,data:e.lists,hasNextPage:o},t.$broadcast("rebate_showFactory.set_trial_report_lists")})},sybg_loadMore:function(e){return void 0===a.data?!1:(a.page++,void u.get({goods_id:e,page:a.page},function(e){var o=!0;e.lists.length<10&&(o=!1),a={hasNextPage:o,page:a.page,data:a.data.concat(e.lists)},t.$broadcast("rebate_showFactory.set_trial_report_lists")}))},sybg_hasNextPage:function(){return void 0==a.hasNextPage?!1:a.hasNextPage},get_trial_report_lists:function(){return a?a.data:!1},set_shai_report_lists:function(e){c.get({goods_id:e},function(e){var o=!0;e.lists.length<10&&(o=!1),n={page:1,data:e.lists,hasNextPage:o},t.$broadcast("rebate_showFactory.set_shai_report_lists")})},sybg_loadMore:function(e){return void 0===n.data?!1:(n.page++,void c.get({goods_id:e,page:n.page},function(e){var o=!0;e.lists.length<10&&(o=!1),n={hasNextPage:o,page:n.page,data:n.data.concat(e.lists)},t.$broadcast("rebate_showFactory.data_shai_report")}))},mjsd_hasNextPage:function(){return void 0==n.hasNextPage?!1:n.hasNextPage},get_shai_report_lists:function(){return n?n.data:!1}}}]).factory("User_registerFactory",["$resource","$rootScope","ENV",function(e,t,o){var r=o.api,a=e(r),n={},s={},i={},d={},u={};return{getsms:function(e){a.get({a:"check_phone_exsit",phone:e},function(e){n=e,t.$broadcast("NewsContent.getsms")})},setsms:function(){return n},send_sms:function(e,o){a.get({a:"send_phone_code","enum":"phone",phone:e},function(e){s=e,t.$broadcast("NewsContent.sendsms")})},get_send_sms:function(){return s},error_get_send_sms:function(){return i},register_check_sms:function(e,o){a.get({a:"register_check_sms",phone:e,sms:o},function(e){d=e.status,u=e.msg,t.$broadcast("NewsContent.registerchecksms")})},get_register_check_sms:function(){return d}}}]).factory("User_register1Factory",["$resource","$rootScope","ENV",function(e,t,o){var r=o.api,a=e(r+"&a=register");return{set_register:function(e,o,r){a.save({user_phone:e,sms:o,user_password:r,version:"1.0",platform:"IOS",platform_name:"ce"},function(e){user_xinxi=e,t.$broadcast("User_register1Factory.setregister")})},get_register:function(){return user_xinxi}}}]).factory("UserloginFactory",["$resource","$rootScope","ENV","StorageFactory",function(e,t,o,r){var a,n=o.api,s=e(n+"&c=app&a=login"),i=e(n+"&c=app&a=qqlogin");return{login:function(e,o){return s.save({username:e,password:o,version:"1.0",platform:"IOS",platform_name:"ce"},function(e){a=e,t.$broadcast("User.loginUpdated")})},logout:function(){r.remove2()},getCurrentUser:function(){return a},pingtai_login:function(e){return i.save({userinfo:e,version:"1.0",platform:"IOS",platform_name:"ce"},function(e){a=e,t.$broadcast("User.loginUpdated")})}}}]).factory("UserPersonalFactory",["$resource","$rootScope","ENV","StorageFactory",function(e,t,o,r){var a=o.api,n=e(a,{},{query:{method:"get",params:{a:"goods_show",good:"@aid"},timeout:2e4}});return{set_userinfo:function(e,o){return n.query({a:"get_userinfo",userid:e,random:o},function(e){userinfo=e,1==userinfo.status&&r.set("profile",userinfo),0==userinfo.status&&(r.remove2(),userinfo=""),t.$broadcast("UserPersonal.set_userinfo")})},get_userinfo:function(){return userinfo}}}]).factory("UserForgetFactory",["$resource","$rootScope","ENV","StorageFactory",function(e,t,o,r){var a,n,s,i=o.api,d=e(i+"&a=send_code"),u=e(i+"&a=check_find_pwd"),c=e(i+"&a=reset_pwd");return{set_username:function(e){return d.save({username:e},function(e){s=e,t.$broadcast("Userforget.set_username")})},get_username:function(){return s},set_username_code:function(e,o){return u.save({username:e,code:o},function(e){a=e,t.$broadcast("Userforget.set_username_code")})},get_username_code:function(){return a},set_username_password:function(e,o,r,a){return c.save({username:e,userid:o,password:r,random:a},function(e){n=e,t.$broadcast("Userforget.set_username_password")})},get_username_password:function(){return n}}}]).factory("UserProfileFactory",["$resource","$rootScope","ENV","StorageFactory",function(e,t,o,r){var a,n,s,i,d,u,c,l,_,g,p,f,m,h,b,w,y=o.api,v=e(y+"&a=update_pwd"),$=e(y+"&a=get_area"),k=e(y+"&a=reset_pwd"),P=e(y+"&a=update_email"),F=e(y+"&a=update_qq"),x=e(y+"&a=get_tbaccount"),B=e(y+"&a=get_address"),U=e(y+"&a=update_address"),T=e(y+"&a=update_identity"),N=e(y+"&a=send_email_code"),S=e(y+"&a=update_phone"),E=e(y+"&a=bind_tb_info"),j=e(y+"&a=setdefault"),q=e(y+"&a=bind_del_tb"),C=e(y+"&a=get_bank_info"),V=e(y+"&a=bind_alipay_info"),L=e(y+"&a=bind_bank_info"),I=e(y+"&a=set_user_nickname");return{set_update_pwd:function(e,o,r,n){return v.save({oldpass:e,password:o,userid:r,random:n},function(e){a=e,t.$broadcast("UserProfilePassword.set_update_pwd")})},get_update_pwd:function(){return a},set_username_address:function(e){return $.save({id:e},function(e){n=e.data,t.$broadcast("UserProfileFactory.set_username_address")})},get_username_address:function(){return n.data},set_username_password:function(e,o,r,a){return k.save({username:e,userid:o,password:r,random:a},function(e){s=e,t.$broadcast("Userforget.set_username_password")})},get_username_password:function(){return s},set_username_email:function(e,o,r,a){return P.save({email:e,code:o,userid:r,random:a},function(e){i=e,t.$broadcast("UserProfileFactory.set_username_email")})},get_username_email:function(){return i},set_username_qq:function(e,o,r){return F.save({qq:e,userid:o,random:r},function(e){d=e,t.$broadcast("UserProfileFactory.set_username_qq")})},get_username_qq:function(){return d},set_username_taobao:function(e,o){r.get("taobao")?(u=r.get("taobao"),t.$broadcast("UserProfileFactory.set_username_taobao")):x.save({userid:e,random:o},function(e){u=e,r.set("taobao",u),t.$broadcast("UserProfileFactory.set_username_taobao")})},set_username_taobao2:function(e,o){x.save({userid:e,random:o},function(e){u=e,r.set("taobao",u),t.$broadcast("UserProfileFactory.set_username_taobao")})},get_username_taobao:function(){return u},set_username_Profile_address:function(e,o){return B.save({userid:e,random:o},function(e){c=e,t.$broadcast("UserProfileFactory.set_username_Profile_address")})},get_username_Profile_address:function(){return c},set_username_Profile_edit_address:function(e,o,r,a,n,s,i,d){return U.save({province:e,city:o,area:r,r_address:a,r_name:n,r_phone:s,userid:i,random:d},function(e){l=e,t.$broadcast("UserProfileFactory.set_username_Profile_edit_address")})},get_username_Profile_edit_address:function(){return l},set_username_Profile_edit_identity:function(e,o,r,a,n,s,i,d,u,c,l,g){return T.save({name:e,id_number:o,person_img:r,face_img:a,back_img:n,sex:s,year:i,month:d,day:u,age:c,userid:l,random:g},function(e){_=e,t.$broadcast("UserProfileFactory.set_username_Profile_edit_identity")})},get_username_Profile_edit_identity:function(){return _},set_send_email_code:function(e,o,r,a){return N.save({account:e,title:o,userid:r,random:a},function(e){g=e,t.$broadcast("UserProfileFactory.set_send_email_code")})},get_send_email_code:function(){return g},set_edit_phone:function(e,o,r,a){return S.save({phone:e,code:o,userid:r,random:a},function(e){p=e,t.$broadcast("UserProfileFactory.set_edit_phone")})},get_edit_phone:function(){return p},set_bind_taobao:function(e,o,r){return E.save({account:e,userid:o,random:r},function(e){f=e,t.$broadcast("UserProfileFactory.set_bind_taobao")})},get_bind_taobao:function(){return f},set_bind_taobao_setdefault:function(e,o,r){return j.save({id:e,userid:o,random:r},function(e){f=e,t.$broadcast("UserProfileFactory.set_bind_taobao_setdefault")})},get_bind_taobao_setdefault:function(){return f},set_bind_del_tb:function(e,o,r){return q.save({id:e,userid:o,random:r},function(e){m=e,t.$broadcast("UserProfileFactory.set_bind_del_tb")})},get_bind_del_tb:function(){return m},get_bank_info:function(e,t,o){return C.save({},function(e){h=e})},set_bind_alipay_info:function(e,o,r){return V.save({account:e,userid:o,random:r},function(e){b=e,t.$broadcast("UserProfileFactory.set_bind_alipay_info")})},get_bind_alipay_info:function(){return b},set_bind_bank_info:function(e,o,r,a,n,s,i,d){return L.save({account:e,bank_name:o,sub_branch:r,province:a,city:s,area:n,userid:i,random:d},function(e){b=e,t.$broadcast("UserProfileFactory.set_bind_bank_info")})},get_bind_bank_info:function(){return b},set_nickname:function(e,o,r,a){I.save({userid:e,random:o,nickname:r,user_avatar:a},function(e){w=e,t.$broadcast("UserProfileFactory.set_nickname")})},get_nickname:function(){return w}}}]).factory("UserDepositeFactory",["$resource","$rootScope","ENV",function(e,t,o){var r,a,n,s=o.api,i={},d=e(s+"&a=get_useraccount"),u=e(s+"&a=cash_config_info"),c=e(s+"&a=person_cash"),l=e(s+"&a=getusercashlog");return{set_useraccount:function(e,o){return d.save({userid:e,random:o},function(e){r=e,t.$broadcast("UserDepositeFactory.set_useraccount")})},get_useraccount:function(){return r},set_cash_config_info:function(){return u.get({},function(e){a=e,t.$broadcast("UserDepositeFactory.set_cash_config_info")})},get_cash_config_info:function(){return a.data},set_person_cash:function(e,o,r,a,s){return c.save({money:e,type:o,paypal:r,userid:a,random:s},function(e){n=e,t.$broadcast("UserDepositeFactory.set_person_cash")})},get_person_cash:function(){return n},set_getusercashlog:function(e,o){return l.get({userid:e,random:o},function(e){var o=!0;e.lists.length<10&&(o=!1),i.data=e.lists,i.hasNextPage=o,i.page=1,t.$broadcast("UserDepositeFactory.set_getusercashlog")})},get_getusercashlog:function(){return i.data},txjl_loadMore:function(e,o){if(void 0===i.data)return!1;i.page++;var r=i.page;l.get({userid:e,random:o,page:i.page},function(e){var o=!0;e.lists.length<10&&(o=!1),i={hasNextPage:o,page:r,data:i.data.concat(e.lists)},t.$broadcast("UserDepositeFactory.set_getusercashlog")})},hasNextPage:function(){return void 0==i.hasNextPage?!1:i.hasNextPage}}}]).factory("UserLogFactory",["$resource","$rootScope","ENV",function(e,t,o){var r=o.api,a={},n=e(r+"&a=getfinancelog");return{set_user_log:function(e,o,r){return type=e,n.get({type:type,userid:o,random:r},function(e){var o=!0;e.lists.length>10&&(o=!1),a={page:1,data:e.lists,hasNextPage:o},t.$broadcast("UserLogFactory.set_user_log")})},get_user_log:function(){return a?a.data:!1},zhmx_loadMore:function(e,o){if(void 0===a.data)return!1;a.page++;var r=a.page;n.get({type:type,userid:e,random:o,page:a.page},function(e){if(0==e.lists.length)return!1;var o=!0;e.lists.length<10&&(o=!1),a={hasNextPage:o,page:r,data:a.data.concat(e.lists)},t.$broadcast("UserLogFactory.set_user_log")})},hasNextPage:function(){return void 0==a.hasNextPage?!1:a.hasNextPage}}}]).factory("trialOrderFactory",["$resource","$rootScope","ENV",function(e,t,o){var r,a,n,s,i,d,u,c,l,_,g,p,f,m,h,b,w,y,v=o.api,$={},k=e(v+"&a=apply_order"),P=e(v+"&a=getorderlists"),F=e(v+"&a=fill_order_sn"),x=e(v+"&a=order_log"),B=e(v+"&a=fill_trial_report"),U=e(v+"&a=close_order_sn"),T=e(v+"&a=order_info_one"),N=e(v+"&a=appeal_order"),S=e(v+"&a=apply_rebate_order"),E=e(v+"&a=shai_report"),j=e(v+"&a=is_join"),q=e(v+"&a=vip_apply_order"),C=e(v+"&a=point_apply_order"),V=e(v+"&a=answer_task"),L=e(v+"&a=is_join_borke"),I=e(v+"&a=is_join_exchange"),M=e(v+"&a=exchange"),A=e(v+"&a=get_shop_log"),O=e(v+"&a=complete_order"),D=e(v+"&a=commission_pay_submit");return{apply_order:function(e,o,a,n,s){k.save({goods_id:e,bind_taobao:o,talk_content:a,userid:n,random:s},function(e){r=e,t.$broadcast("trialOrderFactory.apply_order")})},vip_apply_order:function(e,o,r,a,n){q.save({goods_id:e,bind_taobao:o,talk_content:r,userid:a,random:n},function(e){g=e,t.$broadcast("trialOrderFactory.vip_apply_order")})},point_apply_order:function(e,o,r,a,n){C.save({goods_id:e,bind_taobao:o,talk_content:r,userid:a,random:n},function(e){p=e,t.$broadcast("trialOrderFactory.point_apply_order")})},get_apply_order:function(){return void 0==r?!1:r},get_vip_apply_order:function(){return g?g:!1},get_point_apply_order:function(){return p?p:!1},set_getorderlists:function(e,o,r,a){P.save({userid:e,mod:o,status:r,random:a},function(e){var o=!0;e.lists.length<10&&(o=!1),$={data:e.lists,page:1,hasNextPage:o},t.$broadcast("trialOrderFactory.set_getorderlists")})},get_getorderlists:function(){return void 0==$||$.length<1?!1:$.data},wdsy_loadMore:function(e,o,r,a){$.page++,P.save({userid:e,mod:o,status:r,random:a,page:$.page},function(e){var o=!0;e.lists.length<10&&(o=!1),$={data:$.data.concat(e.lists),page:$.page,hasNextPage:o},t.$broadcast("trialOrderFactory.set_getorderlists")})},get_wdsy_hasNextPage:function(){return $.hasNextPage},set_order_info:function(e,o,r){T.save({order_id:e,userid:o,random:r},function(e){d=e,t.$broadcast("trialOrderFactory.set_order_info")})},get_order_info:function(){return d.data},set_fill_order_sn:function(e,o,r,n){F.save({order_id:e,order_sn:o,userid:r,random:n},function(e){a=e,t.$broadcast("trialOrderFactory.set_fill_order_sn")})},get_fill_order_sn:function(){return void 0==a?!1:a},set_order_log:function(e,o,r){x.save({order_id:e,userid:o,random:r},function(e){n=e,t.$broadcast("trialOrderFactory.set_order_log")})},get_order_log:function(){return n.data},set_trial_report:function(e,o,r,a,n,i){B.save({order_id:e,star:o,thumb:r,content:a,userid:n,random:i},function(e){s=e,t.$broadcast("trialOrderFactory.set_trial_report")})},get_trial_report:function(){return s},set_close_order_sn:function(e,o,r){U.save({order_id:e,userid:o,random:r},function(e){i=e,t.$broadcast("trialOrderFactory.set_close_order_sn")})},get_close_order_sn:function(){return i},set_appeal_order:function(e,o,r,a,n,s,i,d,c,l,_){buyer_imgs_url={img1:n,img2:s,img3:i},N.save({order_id:e,goods_id:o,buyer_imgs_url:buyer_imgs_url,appeal_type:r,buyer_cause:a,buyer_phone:d,buyer_qq:c,userid:l,random:_},function(e){u=e,t.$broadcast("trialOrderFactory.set_appeal_order")})},get_appeal_order:function(){return u},set_apply_rebate_order:function(e,o,r){S.save({goods_id:e,userid:o,random:r},function(e){c=e,t.$broadcast("trialOrderFactory.set_apply_rebate_order")})},get_apply_rebate:function(){return c},set_shai_report:function(e,o,r,a,n){E.save({order_id:e,report_imgs:o,content:r,userid:a,random:n},function(e){l=e,t.$broadcast("trialOrderFactory.set_shai_report")})},get_shai_report:function(){return l},set_order_is_join:function(e,o,r){j.save({goods_id:e,userid:o,random:r},function(e){_=e,t.$broadcast("trialOrderFactory.set_order_is_join")})},get_order_is_join:function(){return _},set_answer_task:function(e,o,r,a){V.save({id:e,content:o,userid:r,random:a},function(e){f=e,t.$broadcast("trialOrderFactory.set_answer_task")})},get_answer_task:function(){return f},set_is_join_borke:function(e,o,r){L.save({taskid:e,userid:o,random:r},function(e){m=e,t.$broadcast("trialOrderFactory.set_is_join_borke")})},get_is_join_borke:function(){return m},set_shop_exchange:function(e,o,r){I.save({id:e,userid:o,random:r},function(e){m=e,t.$broadcast("trialOrderFactory.set_shop_exchange")})},get_is_join_borke:function(){return m},set_exchange:function(e,o,r,a){M.save({id:e,spec:o,userid:r,random:a},function(e){h=e,t.$broadcast("trialOrderFactory.set_exchange")})},get_exchange:function(){return h},set_shop_log:function(e,o,r){A.save({userid:e,random:o,status:r},function(e){b=e,t.$broadcast("trialOrderFactory.set_shop_log")})},get_shop_log:function(){return b.data},set_complete_order:function(e,o){O.save({userid:e,random:o,status:status},function(e){w=e,t.$broadcast("trialOrderFactory.set_complete_order")})},get_complete_order:function(){return w.data},set_commission_pay_submit:function(e,o,r,a){D.save({goods_id:e,taobao:o,userid:r,random:a,status:status},function(e){y=e,t.$broadcast("trialOrderFactory.set_commission_pay_submit")})},get_commission_pay_submit:function(){return y}}}]).factory("TaskFactory",["$resource","$rootScope","ENV",function(e,t,o){var r,a,n,s=o.api,i=e(s+"&a=broke_list"),d=e(s+"&a=get_user_borke"),u=e(s+"&a=broke_show");return{set_broke_list:function(e,o){i.get({orderby:e,orderway:"DESC",state:o,page:1},function(e){var o=!0;e.lists.length<10&&(o=!1),r={data:e.lists,page:1,hasNextPage:o},t.$broadcast("TaskFactory.set_broke_list")})},task_loadMore:function(e,o){r.page++,i.get({orderby:e,orderway:"DESC",state:o,page:r.page},function(e){var o=!0;e.lists.length<10&&(o=!1),r={data:r.data.concat(e.lists),page:r.page,hasNextPage:o},t.$broadcast("TaskFactory.set_broke_list")})},task_hasNextPage:function(){return r.hasNextPage?r.hasNextPage:!1},get_broke_list:function(){return r.data},set_user_borke:function(e,o){d.save({userid:e,random:o},function(e){a=e,t.$broadcast("TaskFactory.set_user_borke")})},get_user_borke:function(){return a},set_broke_show:function(e){u.get({id:e},function(e){n=e,t.$broadcast("TaskFactory.set_broke_show")})},get_broke_show:function(){return n.lists}}}]).factory("integralFactory",["$resource","$rootScope","ENV",function(e,t,o){var r,a,n=o.api,s=e(n+"&a=shop_lists"),i=e(n+"&a=shop_show");return{set_shop_lists:function(e,o){s.get({page:1},function(e){var o=!0;e.lists.length<10&&(o=!1),r={data:e.lists,page:1,hasNextPage:o},t.$broadcast("integralFactory.set_shop_lists")})},shop_loadMore:function(e,o){r.page++,s.get({orderby:e,orderway:"DESC",page:r.page},function(e){var o=!0;e.lists.length<10&&(o=!1),r={data:r.data.concat(e.lists),page:r.page,hasNextPage:o},t.$broadcast("integralFactory.set_shop_lists")})},get_shop_list:function(){return r.data},shop_hasNextPage:function(){return r.hasNextPage},set_shop_show:function(e){i.get({id:e},function(e){a=e,t.$broadcast("integralFactory.set_shop_show")})},get_shop_show:function(){return a.data}}}]).factory("invitationFactory",["$resource","$rootScope","ENV",function(e,t,o){var r,a,n,s=o.api,i=e(s+"&a=recommend_total_moeny"),d=e(s+"&a=recommend_friend"),u=e(s+"&a=order_by_friend");return{set_recommend_friend:function(e,o){d.save({userid:e,random:o},function(e){n=e,t.$broadcast("invitationFactory.set_recommend_friend")})},get_recommend_friend:function(){return n},set_recommend_total_moeny:function(e,o){i.save({userid:e,random:o},function(e){a=e,t.$broadcast("invitationFactory.set_recommend_total_moeny")})},get_recommend_total_moeny:function(){return a},set_order_by_friend:function(e,o){u.get({},function(e){r=e,t.$broadcast("invitationFactory.set_order_by_friend")})},get_order_by_friend:function(){return r}}}]).factory("jiangFactory",["$resource","$rootScope","ENV",function(e,t,o){var r,a,n,s,i=o.api,d=e(i+"&a=reward_list"),u=e(i+"&a=lottery"),c=e(i+"&a=user_reward_list"),l=e(i+"&a=user_reward_cishu");return{set_reward_list:function(e,o){d.get({},function(e){r=e,t.$broadcast("jiangFactory.set_reward_list")})},get_reward_list:function(){return r.data},set_user_reward_list:function(e,o){c.save({userid:e,random:o},function(e){a=e,t.$broadcast("jiangFactory.set_user_reward_list")})},get_user_reward_list:function(){return a.data},set_lottery:function(e,o){u.save({userid:e,random:o},function(e){n=e,t.$broadcast("jiangFactory.set_lottery")})},get_lottery:function(){return n.data},set_user_reward_cishu:function(e,o){l.save({userid:e,random:o},function(e){s=e,t.$broadcast("jiangFactory.set_user_reward_cishu")})},get_user_reward_cishu:function(){return s.data}}}]).factory("qiandaoFactory",["$resource","$rootScope","ENV",function(e,t,o){var r,a=o.api,n=e(a+"&a=sign");return{set_sign:function(e,o){n.save({userid:e,random:o},function(e){console.log(e),r=e,t.$broadcast("qiandaoFactory.set_sign")})},get_sign:function(){return r}}}]).factory("updateFactory",["$resource","$rootScope","ENV",function(e,t,o){var r,a=o.api,n=e(a+"&a=upload");return{set_upload:function(e){n.save({fle:e},function(e){t.$broadcast("jiangFactory.set_reward_list")})},get_reward_list:function(){return r.data}}}]).factory("uploadFactory",["$cordovaFileTransfer","$resource","$ionicLoading","$rootScope","ENV",function(e,t,o,r,a){var n=a.api,s={1:"",2:"",3:""},i=n+"&a=upload_img",d=n+"&a=upload_avatar_img";return{set_upload:function(t,o){e.upload(i,t).then(function(e){o||(o=1),1==o&&(s={1:e.response}),2==o&&(s={2:e.response}),3==o&&(s={3:e.response}),r.$broadcast("uploadFactory.set_upload")},function(e){},function(e){})},get_upload:function(){return s},set_upload_avatar:function(t,o){var a={userid:549,random:556};e.upload(d,t,a).then(function(e){r.$broadcast("uploadFactory.set_upload")},function(e){},function(e){})},get_upload_avatar:function(){return s}}}]).factory("jpushService",["$http","$window","$document",function(e,t,o){var r={},a=function(e){window.plugins.jPushPlugin.init(),document.addEventListener("jpush.setTagsWithAlias",e.stac,!1),window.plugins.jPushPlugin.openNotificationInAndroidCallback=e.oniac,window.plugins.jPushPlugin.setDebugMode(!0)},n=function(e){window.plugins.jPushPlugin.isPushStopped(e)},s=function(){window.plugins.jPushPlugin.stopPush()},i=function(){window.plugins.jPushPlugin.resumePush()},d=function(e,t){window.plugins.jPushPlugin.setTagsWithAlias(e,t)},u=function(e){window.plugins.jPushPlugin.setTags(e)},c=function(e){window.plugins.jPushPlugin.setAlias(e)};return r.init=a,r.isPushStopped=n,r.stopPush=s,r.resumePush=i,r.setTagsWithAlias=d,r.setTags=u,r.setAlias=c,r}]).factory("soFactory",["$resource","$ionicLoading","$rootScope","ENV",function(e,t,o,r){var a,n,s=r.api,i=e(s+"&a=keyword_hot"),d=e(s+"&a=search_goods");return{set_keyword_hot:function(){i.query({},function(e){a=e,o.$broadcast("soFactory.set_keyword_hot")})},get_keyword_hot:function(){return a},set_search_goods:function(e){d.get({keyword:e},function(e){n=e,o.$broadcast("soFactory.set_search_goods")})},get_search_goods:function(){return n}}}]),e.configMod=o,e.m1=r,t[""]=e}({},function(){return this}());